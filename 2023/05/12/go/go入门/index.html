<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ruoxixiruo.github.io","root":"/blog/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1,开发的步骤 go程序的目录结构 1234567d:    src        go_code            project01                main                	hello.go                package">
<meta property="og:type" content="article">
<meta property="og:title" content="go入门">
<meta property="og:url" content="https://ruoxixiruo.github.io/blog/2023/05/12/go/go%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="RUOXI-BLOG">
<meta property="og:description" content="1,开发的步骤 go程序的目录结构 1234567d:    src        go_code            project01                main                	hello.go                package">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-05-12T00:24:58.000Z">
<meta property="article:modified_time" content="2024-03-28T16:11:44.000Z">
<meta property="article:author" content="ruoxi">
<meta property="article:tag" content="go">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ruoxixiruo.github.io/blog/2023/05/12/go/go%E5%85%A5%E9%97%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>go入门 | RUOXI-BLOG</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">RUOXI-BLOG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ruoxixiruo.github.io/blog/2023/05/12/go/go%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="ruoxi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RUOXI-BLOG">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          go入门
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-05-12 00:24:58" itemprop="dateCreated datePublished" datetime="2023-05-12T00:24:58+00:00">2023-05-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h5 id="1-开发的步骤"><a href="#1-开发的步骤" class="headerlink" title="1,开发的步骤"></a>1,开发的步骤</h5><ul>
<li><p>go程序的目录结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">d:</span><br><span class="line">    src</span><br><span class="line">        go_code</span><br><span class="line">            project01</span><br><span class="line">                main</span><br><span class="line">                	hello.go</span><br><span class="line">                package</span><br></pre></td></tr></table></figure></li>
</ul>
<span id="more"></span>

<ul>
<li><p>hello.go程序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	fmt.Println(&quot;hello world!&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// vscode调试go配置&#123;&quot;console&quot;: &quot;integratedTerminal&quot;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>代码说明</p>
<ul>
<li>go文件的后缀是.go</li>
<li>package main<ul>
<li>表示hello.go文件所在的包是main，在go中，每个文件都必须归属一个包</li>
</ul>
</li>
<li>import  “fmt”<ul>
<li>表示引入一个包，包名fmt，引入该包后，就可以使用fmt包的函数，比如fmt.Println</li>
</ul>
</li>
<li>func main(){}<ul>
<li>func是一个关键字，表示一个函数</li>
<li>main是函数名，是一个主函数，即程序的入口</li>
</ul>
</li>
<li>fmt.Println<ul>
<li>调用fmt包的函数</li>
</ul>
</li>
</ul>
</li>
<li><p>运行代码</p>
<ul>
<li>go run hello.go</li>
<li>go build hello.go   &amp;   ./hello.exe</li>
</ul>
</li>
</ul>
<h5 id="2-Golang执行流程分析"><a href="#2-Golang执行流程分析" class="headerlink" title="2,Golang执行流程分析"></a>2,Golang执行流程分析</h5><ul>
<li>如果是对源码编译之后再执行<ul>
<li>go build</li>
</ul>
</li>
<li>对源码直接执行<ul>
<li>go run</li>
</ul>
</li>
<li>两种执行流程的区别<ul>
<li>如果我们生成了可执行文件，可以在没有go开发环境的机器上运行</li>
<li>go run 依赖go环境</li>
<li>在编译时会将程序运行依赖的库文件包含在可执行文件中，可执行文件会变大很多</li>
</ul>
</li>
</ul>
<h5 id="3，编译和运行说明"><a href="#3，编译和运行说明" class="headerlink" title="3，编译和运行说明"></a>3，编译和运行说明</h5><ul>
<li>有了go源码，通过编译器将其编译成机器可以识别的二进制文件</li>
<li>go build 可以指定生成的可执行文件名，在window下必须是.exe后缀<ul>
<li>go build -o my_hello.exe hello.go</li>
</ul>
</li>
<li>如果程序有错误，编译时会在错误的哪行报错</li>
<li>运行有两种形式</li>
</ul>
<h5 id="4，go开发的注意事项"><a href="#4，go开发的注意事项" class="headerlink" title="4，go开发的注意事项"></a>4，go开发的注意事项</h5><ol>
<li>go源文件以go为扩展名</li>
<li>go应用程序的执行入口是main()函数</li>
<li>go严格区分大小写</li>
<li>go方法由一条条的语句构成，每个语句后不需要加分号</li>
<li>go编译器是一行行编译的,不能把多条语句写在同一行</li>
<li>go引用的包和变量如果没有使用到，代码不能编译通过</li>
<li>大括号成对出现</li>
</ol>
<h5 id="5-go语言转义字符"><a href="#5-go语言转义字符" class="headerlink" title="5, go语言转义字符"></a>5, go语言转义字符</h5><ul>
<li>\n</li>
<li>\t</li>
<li>&quot;</li>
<li>\\</li>
<li>\r</li>
</ul>
<h5 id="6-注释"><a href="#6-注释" class="headerlink" title="6,注释"></a>6,注释</h5><ul>
<li>行注释    //</li>
<li>块注释     /* */</li>
<li>注意<ul>
<li>注释的代码不会执行</li>
<li>块注释里不能嵌套块注释</li>
</ul>
</li>
</ul>
<h5 id="7，代码风格"><a href="#7，代码风格" class="headerlink" title="7，代码风格"></a>7，代码风格</h5><ol>
<li>go官方推荐使用行注释来注释代码</li>
<li>正确的缩进和空白<ul>
<li>​    go fmt  hello.go</li>
</ul>
</li>
<li>运算符的两边加空格</li>
<li>行长约定<ul>
<li>一行不要超过80个字符</li>
</ul>
</li>
</ol>
<h5 id="8-golang官方编程指南"><a href="#8-golang官方编程指南" class="headerlink" title="8,golang官方编程指南"></a>8,golang官方编程指南</h5><ul>
<li>api  应用程序编程接口</li>
</ul>
<h5 id="9-Golang标准库API文档"><a href="#9-Golang标准库API文档" class="headerlink" title="9,Golang标准库API文档"></a>9,Golang标准库API文档</h5><ul>
<li> <a target="_blank" rel="noopener" href="https://studygolang.com/pkgdoc">Go语言标准库文档中文版 | Go语言中文网 | Golang中文社区 | Golang中国 (studygolang.com)</a> </li>
</ul>
<h5 id="10-vs-code解决代码跳转问题"><a href="#10-vs-code解决代码跳转问题" class="headerlink" title="10, vs code解决代码跳转问题"></a>10, vs code解决代码跳转问题</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1，如果报错fatal: unable to access &#x27;https://github.com/nsf/gocode/&#x27;: OpenSSL SSL_read: Connection was reset, errno 10054</span><br><span class="line">	git config --global --unset https.proxy</span><br><span class="line">2, 编译或者安装插件的时候会提示：</span><br><span class="line">    go get: module github.com/rogpeppe/godef: Get &quot;https://proxy.golang.org/github.com/rogpeppe/godef/@v/list&quot;: dial tcp 172.217.160.113:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.</span><br><span class="line">    解决方法：改成我们国内可用的代理地址</span><br><span class="line">	在命令提示符输入： go env -w GOPROXY=https://goproxy.cn</span><br><span class="line">3,进行&quot;ctrl&quot;+点击或者F12，进行跳转定义的方式，突然失效了</span><br><span class="line">	解决方案，进入首选项，设置，查找go.docsTool，选项选择为 gogetdoc，这一步可能会提示你没有安装gogetdoc,那就</span><br><span class="line">	go install  github.com/zmb3/gogetdoc@latest</span><br><span class="line">4,无法读取文件&#x27;e:\go_project\pkg\mod\go.mod&#x27; (Error: 无法解析不存在的文件 &#x27;e:\go_project\pkg\mod\go.mod&#x27;)</span><br><span class="line">	go env -w GO111MODULE=on</span><br><span class="line">	参考链接</span><br><span class="line">	https://blog.csdn.net/qq_40357974/article/details/116270331</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="11-变量"><a href="#11-变量" class="headerlink" title="11,变量"></a>11,变量</h5><ul>
<li><p>变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">int</span> i</span><br><span class="line">i = <span class="number">10</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">num := <span class="string">&quot;tom&quot;</span></span><br><span class="line"></span><br><span class="line">全局变量</span><br></pre></td></tr></table></figure></li>
<li><p>常量</p>
<ul>
<li><p>常量总是用const修饰</p>
</li>
<li><p>常量在定义的时候，必须初始化</p>
</li>
<li><p>常量不能修改</p>
</li>
<li><p>常量只能修饰bool，数值类型，int类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		a = <span class="literal">iota</span> </span><br><span class="line">		b </span><br><span class="line">		c </span><br><span class="line">		d</span><br><span class="line">	)</span><br><span class="line">	fmt.Println(a, b, c, d)  <span class="comment">// 0 1 2 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		a = <span class="literal">iota</span> </span><br><span class="line">		b = <span class="literal">iota</span></span><br><span class="line">		c, d = <span class="literal">iota</span>, <span class="literal">iota</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Println(a, b, c, d) <span class="comment">// 0 1 2 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="12-数据类型"><a href="#12-数据类型" class="headerlink" title="12, 数据类型"></a>12, 数据类型</h5><ul>
<li>基本数据类型<ul>
<li>数值型<ul>
<li>整数类型<ul>
<li>int int8 int32 int64 unit unit8 unit16 unit32 unit64 byte</li>
<li>unsafe.Sizeof(num)   返回变量的占用字节数</li>
</ul>
</li>
<li>浮点类型<ul>
<li>float32   float64</li>
</ul>
</li>
</ul>
</li>
<li>字符型    没有专门的字符型，用bytes来保存单个字符</li>
<li>布尔型</li>
<li>字符串</li>
</ul>
</li>
<li>派生/复杂数据类型<ul>
<li>指针</li>
<li>数组</li>
<li>结构体</li>
<li>管道</li>
<li>函数</li>
<li>切片</li>
<li>接口</li>
<li>map(集合)</li>
</ul>
</li>
<li>查看变量的字节大小和类型<ul>
<li>%T</li>
<li>unsafe.Sizeof()</li>
</ul>
</li>
</ul>
<h5 id="14-浮点类型"><a href="#14-浮点类型" class="headerlink" title="14,浮点类型"></a>14,浮点类型</h5><ul>
<li>分类<ul>
<li>单精度</li>
<li>双精度</li>
<li>fmt.Printf(“a + b = %f, 类型为%T”, a+b, a+b)</li>
</ul>
</li>
<li>浮点数 = 符号位 + 指数位 + 尾数位</li>
<li>在存储的过程中 精度会有丢失</li>
<li>通常情况下使用float64，比float32更精确</li>
</ul>
<h5 id="15，字符类型"><a href="#15，字符类型" class="headerlink" title="15，字符类型"></a>15，字符类型</h5><ul>
<li>golang中没有专门的字符类型，一般用bytes来保存</li>
<li>传统的字符串由字符组成，go的字符串不同，他是由字节组成</li>
<li>当我们直接输出byte时, 就是输出了对应字符的码值</li>
<li>overflow溢出<ul>
<li>var  str int = ‘北’</li>
<li>var str byte = ‘北’  会溢出</li>
</ul>
</li>
<li>如果我们保存的字符在ASCII表，直接保存到byte</li>
<li>如果我们保存的字符的码值打印255，这是我们可以考虑int类型保存</li>
<li>如果我们需要按照字符的方式输出，这是我们需要格式化输出<ul>
<li>fmt.Printf(“%c”, str)</li>
</ul>
</li>
<li>字符类型的使用细节<ul>
<li>字符常量是用单引号引起来的单个字符</li>
<li>转义字符  \  可以对字符转义</li>
<li> GO中使用utf-8编码</li>
<li>英文字母1个字节，汉字3个字节</li>
<li>在go中，字符的本质是一个整数，直接输出时是输出字符的码值</li>
<li>字符运算时相当一个整数</li>
<li>可以直接给某个变量赋值一个数值，格式化输出%c，会输出该数值对应的字符</li>
</ul>
</li>
<li>字符的本质<ul>
<li>字符型存储到计算机中，需要将字符对应的码值（整数）找出来</li>
<li>字符和码值的对应关系是通过字符编码表决定的</li>
<li>go的编码统一成了utf-8</li>
</ul>
</li>
</ul>
<h5 id="16-布尔类型"><a href="#16-布尔类型" class="headerlink" title="16,布尔类型"></a>16,布尔类型</h5><ul>
<li>基本介绍<ul>
<li>只允许取值true和false</li>
<li>占一个字节</li>
<li>适用于逻辑运算</li>
</ul>
</li>
</ul>
<h5 id="17，字符串"><a href="#17，字符串" class="headerlink" title="17，字符串"></a>17，字符串</h5><ul>
<li><p>基本使用</p>
<ul>
<li>一串固定长度的字符连接起来的字符序列</li>
</ul>
</li>
<li><p>注意事项和细节</p>
<ul>
<li><p>go的字符串的字节使用utf-8编码标识unicode文本</p>
</li>
<li><p>go中的字符串是不可变的</p>
</li>
<li><p>两种表现形式</p>
<ul>
<li><p>双引号</p>
</li>
<li><p>反引号,以字符串原生形式输出，包括换行和特殊字符，可以实现防止攻击，输出源代码的效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line">func main() &#123;</span><br><span class="line">	var address string = `</span><br><span class="line">	func main()&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	`</span><br><span class="line">	fmt.Printf(&quot;%s&quot;, address)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>字符串的拼接方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	// 方式一</span><br><span class="line">	var str1 = &quot;hello &quot; + &quot;world&quot;</span><br><span class="line">	str1 += &quot; haha!&quot;</span><br><span class="line">	fmt.Println(str1)</span><br><span class="line"></span><br><span class="line">	// 方式二</span><br><span class="line">	var str2 = &quot;hello &quot; + &quot;world&quot; + </span><br><span class="line">	&quot;hello &quot; + &quot;world&quot; + </span><br><span class="line">	&quot;hello &quot; + &quot;world&quot;</span><br><span class="line">	fmt.Println(str2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="18，基本数据类型的默认值"><a href="#18，基本数据类型的默认值" class="headerlink" title="18，基本数据类型的默认值"></a>18，基本数据类型的默认值</h5><ul>
<li><p>在go中，数据类型都有一个默认值，当没有赋值时，就会保留默认值，默认值又叫零值</p>
</li>
<li><p>基本数据类型的默认值如下</p>
<ul>
<li><p>整型    0</p>
</li>
<li><p>浮点型    0</p>
</li>
<li><p>字符串   “”</p>
</li>
<li><p>布尔类型   false</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	var a int </span><br><span class="line">	var b float32</span><br><span class="line">	var c bool</span><br><span class="line">	var d string</span><br><span class="line">	// %v表示按变量的原值输出</span><br><span class="line">	fmt.Printf(&quot;a=%v, b=%v, c=%v, d=%v&quot;, a, b, c, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="19-基本数据类型的转换"><a href="#19-基本数据类型的转换" class="headerlink" title="19,基本数据类型的转换"></a>19,基本数据类型的转换</h5><ul>
<li><p>go中不同类型的变量之间赋值时需要显示转换，也就是不能自动转换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	var i int32 = 100</span><br><span class="line">	// 将i转为float</span><br><span class="line">	var n1 float32 = float32(i)</span><br><span class="line">	var n2 int8 = int8(i)</span><br><span class="line">	fmt.Printf(&quot;i=%v, n1=%v, n2=%v&quot;, i, n1, n2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>本转换的是变量存储的数据，变量本身的数据类型并没有变化</p>
</li>
<li><p>在将 int64转成int8，编译时不会出错，转换的结果按溢出处理，和我们希望的结果不一样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	var n int32 = 100000</span><br><span class="line">	var n1 int8 = int8(n)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(&quot;n=%v, n1=%v&quot;, n, n1)   // n=100000, n1=-96</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	var n1 int32 = 12</span><br><span class="line">	var n3 int8</span><br><span class="line">	var n4 int8</span><br><span class="line">	n4 = int8(n1) + 127   // 编译通过，但结果按溢出处理</span><br><span class="line">	n3 = int8(n1) + 128   // 编译不通过</span><br><span class="line">	fmt.Println(n4, n3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="20-基本数据类型和string的转换"><a href="#20-基本数据类型和string的转换" class="headerlink" title="20,基本数据类型和string的转换"></a>20,基本数据类型和string的转换</h5><ul>
<li><p>基本类型转string</p>
<ul>
<li><p>fmt.Sprintf( )</p>
</li>
<li><p>strconv包的函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	var num1 int = 99</span><br><span class="line">	var num2 float64 = 23.456</span><br><span class="line">	var b bool = true</span><br><span class="line">	var myChar byte = &#x27;a&#x27;</span><br><span class="line">	var str string </span><br><span class="line"></span><br><span class="line">	// fmt.Sprintf()</span><br><span class="line">	str = fmt.Sprintf(&quot;%d&quot;, num1)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(&quot;%f&quot;, num2)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(&quot;%t&quot;, b)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(&quot;%c&quot;, myChar)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	// strconv</span><br><span class="line">	str = strconv.FormatInt(int64(num1), 10)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line">	// &#x27;f&#x27;表示格式，10表示小数位保留10位，64表示float64</span><br><span class="line">	str = strconv.FormatFloat(num2, &#x27;f&#x27;, 10, 64)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line"></span><br><span class="line">	str = strconv.FormatBool(b)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line">	</span><br><span class="line">	str = strconv.Itoa(num1)</span><br><span class="line">	fmt.Printf(&quot;str type %T str=%q\n&quot;, str, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>string转基本类型</p>
<ul>
<li><p>strconv包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	str := &quot;true&quot;</span><br><span class="line">	var b bool </span><br><span class="line">	b, _ = strconv.ParseBool(str)</span><br><span class="line">	fmt.Printf(&quot;b type %T b=%v\n&quot;, b, b)</span><br><span class="line"></span><br><span class="line">	str1 := &quot;1234567890&quot;</span><br><span class="line">	var num int64</span><br><span class="line">	num, _ = strconv.ParseInt(str1, 10, 64)</span><br><span class="line">	fmt.Printf(&quot;b type %T b=%v\n&quot;, num, num)</span><br><span class="line"></span><br><span class="line">	str2 := &quot;123.456&quot;</span><br><span class="line">	var f float64</span><br><span class="line">	f, _ = strconv.ParseFloat(str2, 64)</span><br><span class="line">	fmt.Printf(&quot;b type %T b=%v\n&quot;, f, f)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>string转基本数据类型的注意事项</p>
<ul>
<li>要确保string类型能转成有效的数据。比如我们将”hello”转成一个整数，go直接将其转换成</li>
</ul>
</li>
</ul>
<h5 id="21，指针"><a href="#21，指针" class="headerlink" title="21，指针"></a>21，指针</h5><ul>
<li><p>基本介绍</p>
<ul>
<li><p>获取变量的指针，用&amp;</p>
</li>
<li><p>指针类型， 指针变量存的是一个地址</p>
</li>
<li><p>获取指针类型的值  *ptr</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	i := 10</span><br><span class="line">	fmt.Println(&amp;i)</span><br><span class="line"></span><br><span class="line">	var ptr *int = &amp;i</span><br><span class="line">	// 1,ptr 是一个指针变量</span><br><span class="line">	// 2,ptr 的类型是*int</span><br><span class="line">	// 3,ptr 的值是&amp;i </span><br><span class="line">	fmt.Println(ptr)</span><br><span class="line">	fmt.Println(&amp;ptr)</span><br><span class="line">	fmt.Println(*ptr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	i := 10</span><br><span class="line">	fmt.Println(&amp;i)</span><br><span class="line"></span><br><span class="line">	var ptr *int = &amp;i</span><br><span class="line">	// 通过指针修改i的值</span><br><span class="line">	*ptr = 11</span><br><span class="line">	fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var a int = 300</span><br><span class="line">	var b int = 400 </span><br><span class="line">	var ptr *int = &amp;a </span><br><span class="line">	*ptr = 100 </span><br><span class="line">	ptr = &amp;b </span><br><span class="line">	*ptr = 200</span><br><span class="line">	fmt.Println(a, b, *ptr)  // 100 200 200</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>值类型和引用类型</p>
<ul>
<li><p>值类型</p>
<ul>
<li>基本数据类型， int系列， float系列， bool， string， 数组， 结构体</li>
<li>变量直接存储值，内存通常在栈中分配</li>
</ul>
</li>
<li><p>引用类型</p>
<ul>
<li><p>指针，slice切片， 管道， interface, map等</p>
</li>
<li><p>变量存储的是一个地址，这个地址对应的空间才真正存储数据，内存通常在堆上分配</p>
<p>，当没有任何变量引用这个地址时，该地址对应的数据空间就变成一个垃圾，由GC回收</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="22，标识符"><a href="#22，标识符" class="headerlink" title="22，标识符"></a>22，标识符</h5><ul>
<li><p>包名</p>
<ul>
<li><p>保持package的名字和目录名一致</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 当我们导入自己写的包报错时，可以在项目下初始化一个go.mod</span><br><span class="line">go mod init test    // test可以是任意的名称</span><br><span class="line"></span><br><span class="line">// 我们引入模块的时候，以test(初始化时定义)开头，然后接模块路径</span><br><span class="line">import &quot;test/module&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>变量名</p>
<ul>
<li>驼峰</li>
</ul>
</li>
<li><p>如果变量名，函数名，常量名首字母大写，可以被其它的包访问；如果首字母小写，只能在本包中使用</p>
</li>
<li><p>保留关键字</p>
</li>
<li><p>预定义标识符</p>
</li>
</ul>
<h5 id="23，运算符"><a href="#23，运算符" class="headerlink" title="23，运算符"></a>23，运算符</h5><ul>
<li><p>算术运算符</p>
<ul>
<li>+，-，*，/, %, ++, –</li>
<li>如果运算的都是整数，相除后，去掉小数部分，保留整数部分</li>
<li>如果要保留小数部分，需要有浮点数参与运算</li>
<li>取模运算 等价于 a % b = a - a / b * b</li>
<li>自增和自减只能独立使用 , 错误的用法  c  = a++</li>
<li>++和–只能写在变量后面，不能有++i的用法</li>
</ul>
</li>
<li><p>赋值运算符</p>
<ul>
<li>=, += , -=, *=, /=, %=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=</li>
</ul>
</li>
<li><p>比较运算符</p>
<ul>
<li> ==， !=，&lt;, &gt;, &lt;=, &gt;=</li>
</ul>
</li>
<li><p>逻辑运算符</p>
<ul>
<li><p>&amp;&amp;,  ||, !</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func test() bool &#123;</span><br><span class="line">	return true</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	num := 10</span><br><span class="line">	if num &lt; 9 &amp;&amp; test()&#123;</span><br><span class="line">		fmt.Println(&quot;测试短路与&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if num &gt; 9 || test()&#123;</span><br><span class="line">		fmt.Println(&quot;测试短路或&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>位运算符</p>
<ul>
<li>&amp;, |, ^,&lt;&lt;, &gt;&gt;</li>
</ul>
</li>
<li><p>其它运算符  </p>
<ul>
<li>&amp;  返回地址</li>
<li>*，指针变量</li>
</ul>
</li>
</ul>
<h5 id="24-键盘输入数据"><a href="#24-键盘输入数据" class="headerlink" title="24,键盘输入数据"></a>24,键盘输入数据</h5><ul>
<li><p>fmt.Scanln</p>
</li>
<li><p>fmt.Scanf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line">	var num int</span><br><span class="line">	fmt.Println(&quot;输入num:&quot;)</span><br><span class="line">	fmt.Scanln(&amp;num)</span><br><span class="line">	fmt.Println(num)</span><br><span class="line"></span><br><span class="line">	var age int </span><br><span class="line">	var name string</span><br><span class="line">	fmt.Println(&quot;输入age:&quot;)</span><br><span class="line">	fmt.Scanf(&quot;%d %s&quot;, &amp;age, &amp;name)</span><br><span class="line">	fmt.Println(name, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="25-二进制"><a href="#25-二进制" class="headerlink" title="25,二进制"></a>25,二进制</h5><ul>
<li>其它进制转成十进制</li>
<li>十进制转其它进制</li>
</ul>
<h5 id="26，原码，反码，补码-（对于有符号数）"><a href="#26，原码，反码，补码-（对于有符号数）" class="headerlink" title="26，原码，反码，补码 （对于有符号数）"></a>26，原码，反码，补码 （对于有符号数）</h5><ul>
<li>二进制的最高位是符号位</li>
<li>正数的原，反，补一致</li>
<li>负数的反码, 原码的符号位不变，其它位取反</li>
<li>负数的补码，它的反码 + 1</li>
<li>0的反码，补码都是0</li>
<li>计算机运算的时候，都是以补码的方式来运算的</li>
</ul>
<h5 id="27，位运算符和移位运算符"><a href="#27，位运算符和移位运算符" class="headerlink" title="27，位运算符和移位运算符"></a>27，位运算符和移位运算符</h5><ul>
<li>&amp;, |, ^</li>
<li>右移运算    低位溢出，符号位不变，并用符号位补溢出的高位</li>
<li>左移运算    符号位不变，低位补0</li>
</ul>
<h5 id="28，流程控制"><a href="#28，流程控制" class="headerlink" title="28，流程控制"></a>28，流程控制</h5><ul>
<li><p>顺序控制</p>
</li>
<li><p>分支控制</p>
<ul>
<li><p>if…else if … else… </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line">	var age int</span><br><span class="line">	fmt.Scanln(&amp;age)</span><br><span class="line">	if age &gt; 18 &#123;</span><br><span class="line">		fmt.Println(&quot;大于18&quot;)</span><br><span class="line">	&#125; else if age &lt; 18 &#123;</span><br><span class="line">		fmt.Println(&quot;小于18&quot;)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Println(&quot;等于18&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if name := &quot;zhou&quot;; name == &quot;zhou&quot; &#123;</span><br><span class="line">		fmt.Println(&quot;yes&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">		fmt.Println(&quot;test&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>switch</p>
<ul>
<li><p>不需要break</p>
</li>
<li><p>default不是必须的</p>
</li>
<li><p>case的数据类型和switch的数据类型要保持一致</p>
</li>
<li><p>case后面的表达式如果是常量，要求不能重复</p>
</li>
<li><p>case后面可以跟多个表达式，用”,”连接</p>
</li>
<li><p>switch也可以不带表达式 </p>
</li>
<li><p>switch后也可以直接声明/定义一个变量，以 ‘;’结束</p>
</li>
<li><p>switch穿透  fallthrought, case 语句后面加fallthrought， 会继续执行后面的case语句</p>
</li>
<li><p>Type Switch</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line">	fmt.Println(&quot;请输入&quot;)</span><br><span class="line">	var ch byte</span><br><span class="line">	fmt.Scanf(&quot;%c&quot;, &amp;ch)</span><br><span class="line">	fmt.Println(ch)</span><br><span class="line">	switch ch &#123;</span><br><span class="line">	case &#x27;a&#x27;:</span><br><span class="line">		fmt.Printf(&quot;周一&quot;)</span><br><span class="line">	case &#x27;b&#x27;:</span><br><span class="line">		fmt.Println(&quot;周二&quot;)</span><br><span class="line">	case &#x27;c&#x27;:</span><br><span class="line">		fmt.Println(&quot;周三&quot;)</span><br><span class="line">	default:</span><br><span class="line">		fmt.Println(&quot;重新输入&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	fmt.Println(&quot;请输入&quot;)</span><br><span class="line">	var ch byte</span><br><span class="line">	fmt.Scanf(&quot;%c&quot;, &amp;ch)</span><br><span class="line">	fmt.Println(ch)</span><br><span class="line">	</span><br><span class="line">	switch &#123;</span><br><span class="line">	case ch == &#x27;a&#x27;:</span><br><span class="line">		fmt.Println(&quot;ch == a&quot;)</span><br><span class="line">	case ch == &#x27;b&#x27;:</span><br><span class="line">		fmt.Println(&quot;ch == b&quot;)</span><br><span class="line">	default:</span><br><span class="line">		fmt.Println(&quot;else&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>循环控制 </p>
<ul>
<li><p>for循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	i := 1</span><br><span class="line">	for ; i&lt;=10; i++ &#123;</span><br><span class="line">		fmt.Println(&quot;hello world&quot;, i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(i)  // 11</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	for i:=1;i&lt;=10;i++ &#123;</span><br><span class="line">		fmt.Println(&quot;hello&quot;, i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	j := 1</span><br><span class="line">	for j &lt;= 10 &#123;</span><br><span class="line">		fmt.Println(&quot;hello&quot;, j)</span><br><span class="line">		j += 1</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	m := 1</span><br><span class="line">	for &#123;</span><br><span class="line">		if m &gt; 10 &#123;</span><br><span class="line">			break </span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(&quot;test&quot;, m)</span><br><span class="line">		m += 1</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>for…range  遍历字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  func main() &#123;</span><br><span class="line">  	</span><br><span class="line">  	str := &quot;hello world&quot;</span><br><span class="line">  	for i:=0; i &lt; len(str); i++&#123;</span><br><span class="line">  		fmt.Printf(&quot;%c \n&quot;, str[i])</span><br><span class="line">  	&#125;</span><br><span class="line">  </span><br><span class="line">  	for ind, val := range str &#123;</span><br><span class="line">  		fmt.Printf(&quot;index=%d, val=%c \n&quot;, ind, val)</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  	</span><br><span class="line">  	str := &quot;hello，北京！&quot;</span><br><span class="line">  	// str1 := []rune(str)</span><br><span class="line">  	for key, val := range str &#123;</span><br><span class="line">  		fmt.Printf(&quot;ind=%d, val=%c \n&quot;, key, val)</span><br><span class="line">  	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>go中没有while的do…while, 可以通过for循环实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	</span><br><span class="line">	// while实现</span><br><span class="line">	i := 1</span><br><span class="line">	for &#123;</span><br><span class="line">		if i &gt; 10 &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(&quot;while &quot;, i)</span><br><span class="line">		i ++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// do...while实现</span><br><span class="line">	j := 1</span><br><span class="line">	for &#123;</span><br><span class="line">		fmt.Println(&quot;do...while &quot;, j)</span><br><span class="line">		j ++ </span><br><span class="line">		if j &gt;= 11 &#123;</span><br><span class="line">			break</span><br><span class="line">&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>多重循环</p>
</li>
</ul>
</li>
</ul>
<h5 id="29，跳转控制语句-break"><a href="#29，跳转控制语句-break" class="headerlink" title="29，跳转控制语句 break"></a>29，跳转控制语句 break</h5><ul>
<li><p>用于终止for循环和switch</p>
</li>
<li><p>注意事项和细节</p>
<ul>
<li><p>break默认跳出最近的for循环</p>
</li>
<li><p>break出现在多层嵌套的语句中，可以用指定lable来指定跳出哪层</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line"></span><br><span class="line">	for i := 0; i &lt;= 5; i++ &#123;</span><br><span class="line">		lable1:</span><br><span class="line">		for j := 0; j &lt;= 5; j++ &#123;</span><br><span class="line">			if i == 2 &#123;</span><br><span class="line">				break lable1</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lable2:</span><br><span class="line">	for i := 0; i &lt;= 5; i++ &#123;</span><br><span class="line">		for j := 0; j &lt;= 5; j++ &#123;</span><br><span class="line">			if i == 2 &#123;</span><br><span class="line">				break lable2</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="30，continue跳出当前循环"><a href="#30，continue跳出当前循环" class="headerlink" title="30，continue跳出当前循环"></a>30，continue跳出当前循环</h5><ul>
<li><p>结束本次循环，继续下次循环</p>
</li>
<li><p>cotinue默认跳出的是最近的哪层最近的那次循环</p>
</li>
<li><p>可以通过标签来指定要跳过的是哪层循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line"></span><br><span class="line">	for i:=0;i&lt;=5;i++&#123;</span><br><span class="line">		if i == 3 &#123;</span><br><span class="line">			continue</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	lable1:</span><br><span class="line">	for i:=0;i&lt;=5;i++&#123;</span><br><span class="line">		for j:=0;j&lt;=5;j++&#123;</span><br><span class="line">			if i == 3&#123;</span><br><span class="line">				continue lable1</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="31，goto和return"><a href="#31，goto和return" class="headerlink" title="31，goto和return"></a>31，goto和return</h5><ul>
<li><p>跳转控制语句goto</p>
<ul>
<li><p>goto语句可以无条件的转移到程序的指定行</p>
</li>
<li><p>一般不主张使用goto语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	</span><br><span class="line">	fmt.Println(&quot;ok1&quot;)</span><br><span class="line">	goto lable1</span><br><span class="line">	</span><br><span class="line">	fmt.Println(&quot;ok3&quot;)</span><br><span class="line">	fmt.Println(&quot;ok4&quot;)</span><br><span class="line">	fmt.Println(&quot;ok5&quot;)</span><br><span class="line">	lable1:</span><br><span class="line">	fmt.Println(&quot;ok6&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>return</p>
</li>
</ul>
<h5 id="32，函数"><a href="#32，函数" class="headerlink" title="32，函数"></a>32，函数</h5><ul>
<li><p>自定义函数</p>
</li>
<li><p>系统函数</p>
</li>
<li><p>包的使用细节</p>
<ul>
<li>为了让其它包的文件，可以访问到本包的函数，函数名首字母大写</li>
<li>如果包名较长可以取别名<ul>
<li>utils  “project1/utils”</li>
<li>取了别名，需要根据别名访问</li>
</ul>
</li>
<li>同一个包下，不能有相同的函数名</li>
<li>go build -o zhou.exe .\main\</li>
</ul>
</li>
<li><p>函数的调用机制</p>
<ul>
<li><p>栈区</p>
<ul>
<li>基本数据类型一般分配到栈区，编译器存在逃逸分析</li>
</ul>
</li>
<li><p>堆区</p>
<ul>
<li>引用数据类型一般分配到堆区，编译器存在逃逸分析</li>
</ul>
</li>
<li><p>代码区</p>
<ul>
<li>存放代码</li>
</ul>
</li>
<li><p>在调用函数时，会为该函数分配新的空间，</p>
</li>
<li><p>在每个函数对应的栈中，数据空间是独立的，不会混淆</p>
</li>
<li><p>当一个函数调用完毕，会回收该函数对应的栈空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func test(n int) &#123;</span><br><span class="line">	if n &gt; 2 &#123;</span><br><span class="line">		n -- </span><br><span class="line">		test(n)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	n := 4</span><br><span class="line">	test(n)   // 输出 2 2 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func test(n int) &#123;</span><br><span class="line">	if n &gt; 2 &#123;</span><br><span class="line">		n -- </span><br><span class="line">		test(n)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Println(n)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	n := 4</span><br><span class="line">	test(n)   // 输出 2 2 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>函数的细节</p>
<ul>
<li><p>基本数据类型和数组默认都是值传递的</p>
</li>
<li><p>如果希望函数内的变量能修改函数外的变量，可以传入变量的地址</p>
</li>
<li><p>go函数不支持重载</p>
<ul>
<li>func  test01(n1 int){}</li>
<li>func  test01(n1 int, n2 int){}</li>
</ul>
</li>
<li><p>在go中函数也是一种数据类型，可以赋值给一个变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func getSum(n1 int, n2 int) int &#123;</span><br><span class="line">	return n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	a := getSum</span><br><span class="line"></span><br><span class="line">	fmt.Printf(&quot;a的类型是%T, getSum的类型是%T\n&quot;, a, getSum)</span><br><span class="line"></span><br><span class="line">	res := a(10, 20)</span><br><span class="line">	fmt.Printf(&quot;res=%v&quot;, res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>函数可以作为形参，并且可以被调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  func getSum(n1 int, n2 int) int &#123;</span><br><span class="line">  	return n1 + n2</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  func myFun(funvar func(int, int) int, num1 int, num2 int) int &#123;</span><br><span class="line">  	return funvar(num1, num2)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  func main()&#123;</span><br><span class="line">  	res := myFun(getSum, 10, 20)</span><br><span class="line">  	fmt.Printf(&quot;res=%v&quot;, res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>为了简化数据类型，Go支持自定义数据类型</p>
<ul>
<li><p>语法：type  自定义数据类型名    数据类型   (相当于一个别名)</p>
<ul>
<li><p>type    myint     int </p>
</li>
<li><p>type    mySum    func(int, int) int{}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  func main()&#123;</span><br><span class="line">  	type myInt int </span><br><span class="line">  	var num1 myInt </span><br><span class="line">  	num1 = 50 </span><br><span class="line">  	var num2 int </span><br><span class="line">	num2 = int(num1)  // 不能使用num2 = num1, 类型不一致</span><br><span class="line">  	fmt.Printf(&quot;num1=%v, num2=%v&quot;, num1, num2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>支持对函数返回值命名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  func getSumAndSub(n1 int, n2 int) (sum int, sub int)&#123;</span><br><span class="line">  	sum = n1 + n2 </span><br><span class="line">  	sub = n1 - n2</span><br><span class="line">  	return</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  func main()&#123;</span><br><span class="line">	a, b := getSumAndSub(10, 20)</span><br><span class="line">  	fmt.Printf(&quot;a=%v, b=%v&quot;, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用”_”占位符忽略值</p>
</li>
<li><p>Go支持可变参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func getSum(n1 int, args... int) int &#123;</span><br><span class="line">	sum := n1 </span><br><span class="line">	for i:=0;i&lt;len(args);i++&#123;</span><br><span class="line">		sum += args[i]</span><br><span class="line">	&#125;</span><br><span class="line">	return sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	sum := getSum(10, 20, 30)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="33，init函数"><a href="#33，init函数" class="headerlink" title="33，init函数"></a>33，init函数</h5><ul>
<li><p>每个源文件都可以包含一个init函数，该函数会在main函数执行前，被go运行框架调用，也就是说init会在mian函数前被调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var age = test()</span><br><span class="line"></span><br><span class="line">func test() int &#123;</span><br><span class="line">	fmt.Println(&quot;test函数&quot;)</span><br><span class="line">	return 90</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func init()&#123;</span><br><span class="line">	fmt.Println(&quot;init函数&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	fmt.Println(&quot;main函数&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// test函数</span><br><span class="line">// init函数</span><br><span class="line">// main函数</span><br></pre></td></tr></table></figure></li>
<li><p>init函数的注意事项和细节</p>
<ul>
<li>如果一个文件同时包含全局变量定义，init函数和main函数，执行的流程是  全局变量定义-》init函数-》main函数</li>
<li>init函数最主要的作用，就是完成一些初始化的工作</li>
<li>如果main.go和utils.go中都含有变量定义，init函数，执行的流程是怎样的？</li>
</ul>
</li>
</ul>
<h5 id="34，匿名函数"><a href="#34，匿名函数" class="headerlink" title="34，匿名函数"></a>34，匿名函数</h5>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line">	// 用法1: 直接调用</span><br><span class="line">	res := func (n1 int, n2 int) int &#123;</span><br><span class="line">		return n1 + n2</span><br><span class="line">	&#125;(10, 20)</span><br><span class="line"></span><br><span class="line">	fmt.Println(res)</span><br><span class="line"></span><br><span class="line">	// 用法2: 赋值给变量调用</span><br><span class="line">	f := func (n1 int, n2 int) int &#123;</span><br><span class="line">		return n1 - n2</span><br><span class="line">	&#125;</span><br><span class="line">	res2 := f(20, 10)</span><br><span class="line">	fmt.Println(res2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="35，闭包"><a href="#35，闭包" class="headerlink" title="35，闭包"></a>35，闭包</h5><ul>
<li><p>闭包就是一个函数和其相关的引用环境组成的一个整体</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">func AddUpper() func (int) int &#123;</span><br><span class="line">	var n int = 10</span><br><span class="line">	return func (x int) int &#123;</span><br><span class="line">		n += x</span><br><span class="line">		return n</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	f := AddUpper()</span><br><span class="line">	fmt.Println(f(1))  // 11</span><br><span class="line">	fmt.Println(f(2))	// 13</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AddUpper是一个函数，返回的数据类型是func (int) int</span><br><span class="line">// 返回的是一个匿名函数，这个匿名函数引用到函数外的n，这个匿名函数和n形成一个整体，构成闭包</span><br><span class="line">// 当我们反复调用f函数时，n只初始化一次，因此每次调用都是进行累计</span><br><span class="line">// 可以理解为：闭包是类，函数是操作，n是字段。函数和它使用到的n构成闭包 </span><br><span class="line">// 我们搞清楚闭包的关键，就是要分析出返回函数和它使用到哪些变量</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="36-函数中的defer"><a href="#36-函数中的defer" class="headerlink" title="36, 函数中的defer"></a>36, 函数中的defer</h5><ul>
<li><p>在函数中，经常需要创建资源(数据库连接，文件句柄，锁), 为了在函数执行完毕后，及时释放资源，提供了defer（延时机制）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func sum(n1 int, n2 int) int &#123;</span><br><span class="line"></span><br><span class="line">	// 当执行defer时， 会将defer后面的语句压入到独立的栈中（defer栈）</span><br><span class="line">	// 当函数执行完毕后，再从defer栈，按照先入后出的方式出栈执行</span><br><span class="line">	defer fmt.Println(&quot;n1 = &quot;, n1)</span><br><span class="line">	defer fmt.Println(&quot;n2 = &quot;, n2)</span><br><span class="line">	res := n1 + n2</span><br><span class="line">	defer fmt.Println(&quot;res = &quot;, res)</span><br><span class="line">	return res </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	res := sum(10, 20)</span><br><span class="line">	fmt.Println(&quot;main res = &quot;, res)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line">// 执行结果</span><br><span class="line">// res =  30</span><br><span class="line">// n2 =  20</span><br><span class="line">// n1 =  10</span><br><span class="line">// main res =  30</span><br></pre></td></tr></table></figure>



<ul>
<li><p>defer细节说明</p>
<ul>
<li><p>当go执行到一个defer时，不会立即执行defer后的语句，而是将defer后的语句压入到一个栈中，然后继续执行下一个语句</p>
</li>
<li><p>当函数执行完毕后，再从栈中依次取出语句执行</p>
</li>
<li><p>在defer将语句放入到栈时，也会将相关的值拷贝同时入栈</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">func sum(n1 int, n2 int) int &#123;</span><br><span class="line"></span><br><span class="line">	defer fmt.Println(&quot;n1 = &quot;, n1)</span><br><span class="line">	defer fmt.Println(&quot;n2 = &quot;, n2)</span><br><span class="line">	// 此处可证明， 因为n1和n2的值在输出时没变</span><br><span class="line">	n1 ++ </span><br><span class="line">	n2 ++</span><br><span class="line">	res := n1 + n2</span><br><span class="line">	defer fmt.Println(&quot;res = &quot;, res)</span><br><span class="line">	return res </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	res := sum(10, 20)</span><br><span class="line">	fmt.Println(&quot;main res = &quot;, res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>使用defer的坑</p>
<p> defer是在return之前调用的。但表现形式上却可能不像。本质原因是return A语句并不是一条原子指令，defer被插入到了赋值 与return之间，因此可能有机会改变最终的返回值。 </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(result <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        result++</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// result的结果不为0 </span></span><br><span class="line"><span class="comment">// 可以改为如下</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(result <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    result = <span class="number">0</span> </span><br><span class="line">    <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        result ++ </span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(r <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">     t := <span class="number">5</span></span><br><span class="line">     <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">       t = t + <span class="number">5</span></span><br><span class="line">     &#125;()</span><br><span class="line">     <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// r的结果不为10 </span></span><br><span class="line"><span class="comment">// 可修改为如下</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span> <span class="params">(r <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    t := <span class="number">5</span> </span><br><span class="line">    r = t </span><br><span class="line">    <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        t = t + <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(r <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(r <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">          r = r + <span class="number">5</span></span><br><span class="line">    &#125;(r)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// r的结果不为6</span></span><br><span class="line"><span class="comment">// 可修改为如下</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(r <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    r = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span><span class="params">(r <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">        r = r + <span class="number">5</span></span><br><span class="line">    &#125;(r)</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		a ++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> a </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可修改为</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(res <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	res = a</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		a ++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="37，函数的传参方式"><a href="#37，函数的传参方式" class="headerlink" title="37，函数的传参方式"></a>37，函数的传参方式</h5><ul>
<li>两种传递方式<ul>
<li>值传递</li>
<li>引用传递</li>
</ul>
</li>
<li>不管是值传递韩式引用传递，传递给函数的都是变量的副本，不同的是，值传递的是值的拷贝，引用传递的是地址的拷贝。一般来说，地址拷贝效率高，因为数据量小，而值拷贝取决于拷贝数据的大小，数据越大，效率越低</li>
<li>值类型和引用类型<ul>
<li>值类型：基本数据类型int系列，float系列，bool， string， 数组和结构体</li>
<li>引用类型：指针，slice切片，map，管道chain，interferce等都是引用类型  </li>
</ul>
</li>
</ul>
<h5 id="38，变量作用域"><a href="#38，变量作用域" class="headerlink" title="38，变量作用域"></a>38，变量作用域</h5><ul>
<li>局部变量</li>
<li>全局变量</li>
</ul>
<h5 id="39，字符串中常用的函数"><a href="#39，字符串中常用的函数" class="headerlink" title="39，字符串中常用的函数"></a>39，字符串中常用的函数</h5><ul>
<li>len(str)     统计字符串的长度按字节</li>
<li>str2 := []rune(str1)    字符串变量，处理有中文的问题</li>
<li>strconv.Atoi()      字符串转整形</li>
<li>strconv.Itoa(123)   整形转字符串</li>
<li>[]byte(“hello world”)   字符串转bytes</li>
<li>str = string([]byte{97, 98, 99})   []byte 转字符串</li>
<li>10进制转2,8,16进制<ul>
<li>strconv.FormatInt(123, 2)</li>
<li>strconv.FormatInt(123, 16)</li>
</ul>
</li>
<li>strings.Contains(“seafoo”, “foo”)   子串是否在字符串中</li>
<li>strings.Count(“cehee”, “e”)   统计字符串中有几个指定的子串</li>
<li>strings.EqualFold(“abc”, “Abc”)     不区分大小写的字符串比较</li>
<li>strings.Index(“abca”, “a”)</li>
<li>strings.LastIndex(“go golang”, go)</li>
<li>strings.Replace(“go go hello”, “go”, “GO”, n)  n可以指定希望替换几个，n=-1表示全部替换</li>
<li>srtings.Split(“hello,world,test”, “,”)</li>
<li>strings.ToUpper(“Go”)</li>
<li>strings.ToLower(“Go”)</li>
<li>strings.TrimSpace(“ hello world “)</li>
<li>strings.Trim(“! hello ! “, “! “)    去掉指定字符</li>
<li>strings.TrimLeft()</li>
<li>strings.TrimRight()</li>
<li>strings.HasPrefix()</li>
<li>strings.HasSuffix()</li>
</ul>
<h5 id="40-时间和日期相关的函数"><a href="#40-时间和日期相关的函数" class="headerlink" title="40,时间和日期相关的函数"></a>40,时间和日期相关的函数</h5><ul>
<li><p>time.Time 类型</p>
</li>
<li><p>now  := time.Now()  获取当前时间</p>
</li>
<li><p>now.Year(), now.Month(), now.Day()</p>
</li>
<li><p>格式化日期和时间</p>
<ul>
<li>使用fmt.Printf 或fmt.Sprintf</li>
<li>使用now.Format(“2006/01/02 15:04:05”)    “2006/01/02 15:04:05”的各个数字是固定的</li>
</ul>
</li>
<li><p>时间相关的常量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">    Nanosecond  Duration = 1</span><br><span class="line">    Microsecond          = 1000 * Nanosecond</span><br><span class="line">    Millisecond          = 1000 * Microsecond</span><br><span class="line">    Second               = 1000 * Millisecond</span><br><span class="line">    Minute               = 60 * Second</span><br><span class="line">    Hour                 = 60 * Minute</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">使用：</span><br><span class="line">100 * time.Millisecond</span><br></pre></td></tr></table></figure></li>
<li><p>time.Sleep(1 * time.Second)</p>
</li>
<li><p>time.Unix()    </p>
</li>
<li><p>time.UnixNano()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 统计执行时间</span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	start := time.Now().Unix()</span><br><span class="line"></span><br><span class="line">	str := &quot;&quot;</span><br><span class="line">	for i := 0; i &lt; 100000; i++ &#123;</span><br><span class="line">		str += &quot;hello&quot; + strconv.Itoa(i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(time.Now().Unix() - start)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="41，内置函数"><a href="#41，内置函数" class="headerlink" title="41，内置函数"></a>41，内置函数</h5><ul>
<li><p>len</p>
</li>
<li><p>new  用来分配内存, 主要分配值类型，返回的是指针</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	num := new(int)</span><br><span class="line">	fmt.Printf(&quot;num的类型%T, num的值%v, num的地址%v, 指向的值%v\n&quot;, </span><br><span class="line">		num, num, &amp;num, * num)</span><br><span class="line">	*num = 100</span><br><span class="line">	fmt.Printf(&quot;num的类型%T, num的值%v, num的地址%v, 指向的值%v\n&quot;, </span><br><span class="line">		num, num, &amp;num, * num)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">// num的类型*int, num的值0xc000018088, num的地址0xc00000a028, 指向的值0</span><br><span class="line">// num的类型*int, num的值0xc000018088, num的地址0xc00000a028, 指向的值100</span><br></pre></td></tr></table></figure></li>
<li><p>make  用来分配内存，主要用来分配引用类型</p>
</li>
</ul>
<h5 id="42，错误处理机制"><a href="#42，错误处理机制" class="headerlink" title="42，错误处理机制"></a>42，错误处理机制</h5><ul>
<li><p>go中的处理方式为：defer， panic， recover</p>
</li>
<li><p>go中抛出一个panic的异常，然后在defer中通过recover捕获这个异常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func test()&#123;</span><br><span class="line">	// defer + recover 来捕获和处理异常</span><br><span class="line">	defer func()&#123;</span><br><span class="line">		</span><br><span class="line">		// if err := recover(); err != nil &#123;</span><br><span class="line">		// 	fmt.Println(&quot;err=&quot;, err)</span><br><span class="line">		// &#125;</span><br><span class="line">		err := recover()</span><br><span class="line">		if err != nil &#123;</span><br><span class="line">			fmt.Println(&quot;err=&quot;, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	num1 := 10 </span><br><span class="line">	num2 := 0</span><br><span class="line">	fmt.Println(num1 / num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	test()</span><br><span class="line">	fmt.Println(&quot;main()...&quot;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>实现try…catch</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">func test()&#123;</span><br><span class="line">  	num1 := 10</span><br><span class="line">	num2 := 0</span><br><span class="line">  	fmt.Println(num1 / num2)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  func Try(tryFunc func(), catchFunc func(err interface&#123;&#125;))&#123;</span><br><span class="line">  	defer func()&#123;</span><br><span class="line">  		if err := recover();err != nil&#123;</span><br><span class="line">  			catchFunc(err)</span><br><span class="line">  		&#125;</span><br><span class="line">  		</span><br><span class="line">  	&#125;()</span><br><span class="line">  	tryFunc()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  func catch(err interface&#123;&#125;)&#123;</span><br><span class="line">  	fmt.Println(&quot;err:&quot;, err)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  func main()&#123;</span><br><span class="line">  	Try(test, catch)</span><br><span class="line">  	fmt.Println(&quot;main()&quot;)</span><br><span class="line">  	</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>自定义错误</p>
<ul>
<li><p>errors.New(“”)， 会返回一个error类型的值</p>
</li>
<li><p>panic内置函数，接收一个interface类型的值，作为参数。可以接收error类型的变量，输出错误信息，并退出程序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func readConf(name string)(err error)&#123;</span><br><span class="line">	if name == &quot;config.ini&quot; &#123;</span><br><span class="line">		return nil</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return errors.New(&quot;读取文件错误。。。&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> func test()&#123;</span><br><span class="line">	err := readConf(&quot;config1.ini&quot;)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		// 如果读取文件错误，就输出这个错误， 并终止程序</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(&quot;test()继续执行&quot;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	test()</span><br><span class="line">	fmt.Println(&quot;main()继续执行&quot;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="43，数组"><a href="#43，数组" class="headerlink" title="43，数组"></a>43，数组</h5><ul>
<li><p>数组可以存放多个同一类型数据，数组也是一种数据类型。在go中，数组是值类型</p>
</li>
<li><p>数组的地址可以通过数组名来获取 &amp;intArr</p>
</li>
<li><p>数组的第一个元素的地址，就是数组的首地址</p>
</li>
<li><p>访问数组元素    数组名[下标]</p>
</li>
<li><p>四种初始化数组的方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr01 [3]int = [3]int&#123;1, 2, 3&#125;</span><br><span class="line">	fmt.Println(&quot;numArr01=&quot;, numArr01)</span><br><span class="line"></span><br><span class="line">	var numArr02 = [3]int&#123;5, 6, 7&#125;</span><br><span class="line">	fmt.Println(&quot;numArr02=&quot;, numArr02)</span><br><span class="line"></span><br><span class="line">	var numArr03 = [...]int&#123;8, 9, 10&#125;</span><br><span class="line">	fmt.Println(&quot;numArr03=&quot;, numArr03)</span><br><span class="line"></span><br><span class="line">	var numArr04 = [...]int&#123;1: 100, 0: 99, 2:88&#125;</span><br><span class="line">	fmt.Println(&quot;numArr04=&quot;, numArr04)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>数组遍历</p>
<ul>
<li><p>常规遍历  for</p>
</li>
<li><p>for…range结构遍历</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr01 [3]int = [3]int&#123;4, 5, 6&#125;</span><br><span class="line">	// 方式一遍历</span><br><span class="line">	for i := 0;i&lt;len(numArr01);i++&#123;</span><br><span class="line">		fmt.Println(numArr01[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// 方式二遍历</span><br><span class="line">	for ind, val := range numArr01&#123;</span><br><span class="line">		fmt.Printf(&quot;ind=%v, val=%v\n&quot;, ind, val)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>数组使用的注意事项</p>
<ul>
<li>数组是相同类型数据的集合， 一个数组一旦声明/定义,长度是固定的，不能动态变化</li>
<li>var arr []int   []中没写大小，就是slice切片</li>
<li>数组的元素可以是任何类型，可以包含值类型和引用类型，但是不能混用</li>
<li>数组创建后，如果没有赋值，有默认值(零值)</li>
<li>数组的下标必须在指定范围内使用</li>
<li>go的数组属于值类型，在默认情况下是值传递，因此会进行值拷贝，数组间不会影响</li>
<li>如果想在其它的函数中，去修改原来的数组，可以使用引用传递(指针方式)</li>
<li>在go中，长度是数组类型的一部分，在传递函数参数时，需要考虑数组的长度 </li>
</ul>
</li>
<li><p>练习</p>
<ul>
<li><p>求出数组的最大值</p>
</li>
<li><p>将26个字母存入数组并输出</p>
</li>
<li><p>求数组的和和平均值</p>
</li>
<li><p>反转打印数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	intArr := [5]int &#123;1, 2, 3, 4, 5&#125;</span><br><span class="line">	arrLen := len(intArr)</span><br><span class="line">	for i:=0;i&lt;arrLen / 2;i++&#123;</span><br><span class="line">		intArr[i], intArr[arrLen-1-i] = intArr[arrLen-1-i], intArr[i]</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(intArr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="44，切片"><a href="#44，切片" class="headerlink" title="44，切片"></a>44，切片</h5><ul>
<li><p>基本介绍</p>
<ul>
<li><p>切片是数组的一个引用，因此切片是引用类型</p>
</li>
<li><p>切片的使用的数组类似</p>
</li>
<li><p>切片的长度是可以变化的，切片是一个可以动态变化的数组</p>
</li>
<li><p>基本语法   var slice []int</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	intArr := [5]int &#123;1, 2, 3, 4, 5&#125;</span><br><span class="line">	sli := intArr[1:3]</span><br><span class="line"></span><br><span class="line">	fmt.Println(&quot;intArr=&quot;, intArr)</span><br><span class="line">	fmt.Println(&quot;sli=&quot;, sli)</span><br><span class="line">	fmt.Println(&quot;sli len =&quot;, len(sli))</span><br><span class="line">	fmt.Println(&quot;sli的容量=&quot;, cap(sli))  // 切片的容量是可以动态变化的</span><br><span class="line">	fmt.Printf(&quot;sli的type是：%T&quot;, sli)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// slice是一个引用类型</span><br><span class="line">// slice从底层来说，其实是一个数据结构（struct结构体）</span><br><span class="line">/*</span><br><span class="line">type slice struct &#123;</span><br><span class="line">	ptr *[2]int</span><br><span class="line">	len int</span><br><span class="line">	cap int</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	intArr := [5]int &#123;1, 2, 3, 4, 5&#125;</span><br><span class="line">	sli := intArr[1:3]</span><br><span class="line"></span><br><span class="line">	fmt.Printf(&quot;intArr[1]地址 %p\n&quot;, &amp;intArr[1])</span><br><span class="line">	fmt.Printf(&quot;sli地址 %p\n&quot;, &amp;sli)</span><br><span class="line">	fmt.Printf(&quot;sli[0]地址 %p\n&quot;, &amp;sli[0])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>切片的使用</p>
<ul>
<li>方式一<ul>
<li>定义一个切片，然后让切片去引用一个创建好的数组</li>
</ul>
</li>
<li>方式二<ul>
<li>通过make来创建切片</li>
<li>var 切片名 []类型 = make([]类型, 长度, 容量)<ul>
<li>通过make创建的切片可以指定大小和容量</li>
<li>如果没有给各个元素赋值，会使用默认值</li>
<li>通过make创建的切片对应的数组是由make底层维护，对外不可见，只能通过slice去访问各个元素</li>
</ul>
</li>
</ul>
</li>
<li>方式三<ul>
<li>直接指定具体数组</li>
<li>var slice []string = []string{“tom”, “jack”, “marry”}</li>
</ul>
</li>
<li>方式一和方式二的区别<ul>
<li>直接引用数组，数组是事先存在的，程序员是可见的</li>
<li>通过make创建切片，make也会创建一个数组，是由切片在底层进行维护，程序员不可见</li>
</ul>
</li>
</ul>
</li>
<li><p>切片的注意事项</p>
<ul>
<li><p>切片初始化时，仍然不能越界，但是可以动态增长</p>
</li>
<li><p>cap是一个内置函数，用于统计切片的容量</p>
</li>
<li><p>切片定义后，还不能使用，需要让其引用一个数组，或者make一个空间来供切片使用</p>
</li>
<li><p>切片可以继续切片</p>
</li>
<li><p>append内置函数，可以对切片进行追加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var slice []int = []int&#123;1, 2, 3&#125;</span><br><span class="line">	fmt.Printf(&quot;old slice地址%p, 存放地址是%p\n&quot;, &amp;slice, &amp;slice[0])</span><br><span class="line">	slice = append(slice, 10, 11, 12)</span><br><span class="line">	slice = append(slice, slice...)</span><br><span class="line">	fmt.Printf(&quot;new slice地址%p, 存放地址是%p&quot;, &amp;slice, &amp;slice[0])</span><br><span class="line">	</span><br><span class="line">	// old slice地址0xc000008078, 存放地址是0xc000016150</span><br><span class="line">	// new slice地址0xc000008078, 存放地址是0xc00001e180</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">切片append操作的底层分析</span><br><span class="line">1，切片append操作的本质是对数组扩容</span><br><span class="line">2，go的底层会创建一个新的数组</span><br><span class="line">3，将slice原来包含的元素拷贝到新的数组</span><br><span class="line">4，slice重新引用到新的数组</span><br><span class="line">5，新的数组是在底层维护的，程序员不可见</span><br></pre></td></tr></table></figure></li>
<li><p>切片的拷贝操作 copy(para1, para2)  ,para1和para2都是切片类型</p>
<ul>
<li><p>para1和para2的数据空间是独立，互不影响的，para1[0] = 100, para2[0]不变</p>
</li>
<li><p>容量大的向容量小的切片拷贝，不会报错，只是拷贝一部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = []int&#123;1, 2, 3&#125;</span><br><span class="line"></span><br><span class="line">	var numArr1 = make([]int, 1, 1)</span><br><span class="line">	copy(numArr1, numArr)</span><br><span class="line"></span><br><span class="line">	fmt.Println(numArr1) // [1]</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>切片是引用类型，所以在传递时，遵守引用传递机制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = [3]int&#123;1, 2, 3&#125;</span><br><span class="line"></span><br><span class="line">	var slice = numArr[:]</span><br><span class="line"></span><br><span class="line">	var slice1 = slice</span><br><span class="line">	</span><br><span class="line">	slice[0] = 100</span><br><span class="line">	fmt.Println(numArr, slice, slice1) // [100 2 3] [100 2 3] [100 2 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func test(slice []int) &#123;</span><br><span class="line">	slice[0] = 100</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = []int&#123;1, 2, 3&#125;</span><br><span class="line"></span><br><span class="line">	test(numArr)</span><br><span class="line">	fmt.Println(numArr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>string和slice</p>
<ul>
<li><p>string底层是一个byte数组，string也可以进行切片处理 </p>
</li>
<li><p>string是不可变的，不能通过str[0]=”a”来修改字符串</p>
</li>
<li><p>如果需要修改字符串，可以将string转成[]byte或者[]rune，然后修改重写转成string</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	str := &quot;hello world&quot;</span><br><span class="line">	var slice = str[:]</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	// slice[0] = &quot;t&quot;   编译不通过，string不可变</span><br><span class="line"></span><br><span class="line">	// 转成[]byte数组后，可以处理英文和数字，但是不能处理中文</span><br><span class="line">	// 原因是 []byte 字节处理，而一个汉字是3个字节，因此会出现乱码</span><br><span class="line">	// 解决方法是将string转成 []rune 即可, []rune是按字符处理，兼容汉字</span><br><span class="line">	arr1 := []byte(str)</span><br><span class="line">	arr1[0] = &#x27;t&#x27;</span><br><span class="line">	str = string(arr1)</span><br><span class="line">	fmt.Println(str, slice)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	arr2 := []rune(str)</span><br><span class="line">	arr2[0] = &#x27;北&#x27;</span><br><span class="line">	str = string(arr2)</span><br><span class="line">	fmt.Println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="45，排序和查找"><a href="#45，排序和查找" class="headerlink" title="45，排序和查找"></a>45，排序和查找</h5><ul>
<li><p>排序</p>
<ul>
<li><p>分类</p>
<ul>
<li><p>内部排序</p>
<ul>
<li><p>将需要处理的数据都加载到内部存储器中进行排序（交换排序，选择排序，插入排序）</p>
</li>
<li><p>交换排序</p>
<ul>
<li><p>冒泡排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">func bubble(numArr []int)&#123;</span><br><span class="line">	for i := 0; i &lt;= len(numArr) - 1; i++ &#123;</span><br><span class="line">		for j := 0; j&lt; len(numArr) - i - 1; j++ &#123;</span><br><span class="line">			if numArr[j] &gt; numArr[j+1]&#123;</span><br><span class="line">				numArr[j], numArr[j+1] = numArr[j+1], numArr[j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = []int&#123;3, 1, 4, 5, 2, 7, 9&#125;</span><br><span class="line">	fmt.Println(numArr)</span><br><span class="line">	bubble(numArr)</span><br><span class="line">	fmt.Println(numArr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>快速排序</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>外部排序</p>
<ul>
<li>数据量过大，无法全部加载到内存中，需要借助外部存储进行排序（合并排序，直接合并排序）</li>
</ul>
</li>
</ul>
</li>
<li><p>查找</p>
<ul>
<li><p>顺序查找</p>
</li>
<li><p>二分查找</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">func binarySearch(numArr []int, tar int) bool&#123;</span><br><span class="line">	l := 0 </span><br><span class="line">	r := len(numArr) - 1</span><br><span class="line">	var mid int </span><br><span class="line">	for l &lt;= r &#123;</span><br><span class="line">		mid = (l + r) / 2</span><br><span class="line">		if numArr[mid] == tar&#123;</span><br><span class="line">			return true</span><br><span class="line">		&#125;else if numArr[mid] &gt; tar&#123;</span><br><span class="line">			r = mid - 1</span><br><span class="line">		&#125;else if numArr[mid] &lt; tar&#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func binarySearch1(numArr []int, tar int) bool&#123;</span><br><span class="line">	l := 0 </span><br><span class="line">	r := len(numArr)</span><br><span class="line">	var mid int </span><br><span class="line">	for l &lt; r &#123;</span><br><span class="line">		mid = (l + r) / 2</span><br><span class="line">		if numArr[mid] == tar&#123;</span><br><span class="line">			return true</span><br><span class="line">		&#125;else if numArr[mid] &gt; tar&#123;</span><br><span class="line">			r = mid</span><br><span class="line">		&#125;else if numArr[mid] &lt; tar&#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func binarySearch2(numArr []int, tar int) int&#123;</span><br><span class="line">	// 找到第一个等于tar的位置, 没有找到返回-1</span><br><span class="line">	l := 0 </span><br><span class="line">	r := len(numArr) - 1</span><br><span class="line">	var mid int </span><br><span class="line">	for l &lt;= r &#123;</span><br><span class="line">		mid = (l + r) / 2</span><br><span class="line">		if numArr[mid] == tar&#123;</span><br><span class="line">			r = mid - 1</span><br><span class="line">		&#125;else if numArr[mid] &gt; tar&#123;</span><br><span class="line">			r = mid - 1</span><br><span class="line">		&#125;else if numArr[mid] &lt; tar&#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if l &gt;= len(numArr) || numArr[l] != tar &#123;</span><br><span class="line">		return -1</span><br><span class="line">	&#125;</span><br><span class="line">	return l</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func binarySearch3(numArr []int, tar int) int&#123;</span><br><span class="line">	// 找到最后一个等于tar的位置, 没有找到返回-1</span><br><span class="line">	l := 0 </span><br><span class="line">	r := len(numArr) - 1</span><br><span class="line">	var mid int </span><br><span class="line">	for l &lt;= r &#123;</span><br><span class="line">		mid = (l + r) / 2</span><br><span class="line">		if numArr[mid] == tar&#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125;else if numArr[mid] &gt; tar&#123;</span><br><span class="line">			r = mid - 1</span><br><span class="line">		&#125;else if numArr[mid] &lt; tar&#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if r &lt; 0 || numArr[r] != tar &#123;</span><br><span class="line">		return -1</span><br><span class="line">	&#125;</span><br><span class="line">	return r </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="46，二维数组"><a href="#46，二维数组" class="headerlink" title="46，二维数组"></a>46，二维数组</h5><ul>
<li><p>语法： var 数组名  [大小][大小]类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = [2][3]int&#123;&#123;1, 2, 3&#125;, &#123;4, 5, 6&#125;&#125;</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(&quot;numArr[0]的指针%p\n&quot;, &amp;numArr[0])</span><br><span class="line">	fmt.Printf(&quot;numArr[1]的指针%p\n&quot;, &amp;numArr[1])</span><br><span class="line">	fmt.Printf(&quot;numArr[0][0]的指针%p\n&quot;, &amp;numArr[0][0])</span><br><span class="line">	fmt.Printf(&quot;numArr[1][0]的指针%p\n&quot;, &amp;numArr[1][0])</span><br><span class="line">	fmt.Printf(&quot;numArr的指针%p\n&quot;, &amp;numArr)</span><br><span class="line"></span><br><span class="line">	var numArr2 = [...][3]int&#123;&#123;1, 2, 3&#125;, &#123;4, 5, 6&#125;&#125;</span><br><span class="line">	fmt.Println(numArr2)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>二维数组遍历</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var numArr = [2][3]int&#123;&#123;1, 2, 3&#125;, &#123;4, 5, 6&#125;&#125;</span><br><span class="line">	</span><br><span class="line">	// for循环遍历</span><br><span class="line">	for i:=0;i&lt;len(numArr);i++&#123;</span><br><span class="line">		for j:=0;j&lt;len(numArr[i]);j++&#123;</span><br><span class="line">			fmt.Printf(&quot;%d\t&quot;, numArr[i][j])</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// for...range遍历</span><br><span class="line">	for i,v := range numArr&#123;</span><br><span class="line">		for j, v2 := range v &#123;</span><br><span class="line">			fmt.Printf(&quot;numArr[%d][%d]=%d\t&quot;, i, j, v2)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="47，map"><a href="#47，map" class="headerlink" title="47，map"></a>47，map</h5><ul>
<li><p>基本语法</p>
<ul>
<li><p>var 变量名  map[keytype]valuetype</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	var a map[string]string </span><br><span class="line">	// 在使用map前需要先make，make的作用就是给map分配数据空间</span><br><span class="line">	a = make(map[string]string, 2)</span><br><span class="line">	a[&quot;no1&quot;] = &quot;a&quot;</span><br><span class="line">	a[&quot;no2&quot;] = &quot;b&quot;</span><br><span class="line">	a[&quot;no3&quot;] = &quot;c&quot;</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1,map在使用前一定要先make</span><br><span class="line">// 2,map的key不能重复，如果重复了，以最后的key-value为准</span><br><span class="line">// 3, map的value是可以相同的</span><br><span class="line">// 4,map的key-value是无序的</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>声明map不会分配内存，初始化需要make，分配内存后才能赋值和使用</p>
</li>
<li><p>map的使用方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	// 方式1</span><br><span class="line">	var a map[string]int</span><br><span class="line">	a = make(map[string]int, 10)</span><br><span class="line">	a[&quot;no1&quot;] = 1</span><br><span class="line">	</span><br><span class="line">	// 方式2</span><br><span class="line">	b := make(map[string]int)</span><br><span class="line">	b[&quot;no1&quot;] = 1</span><br><span class="line"></span><br><span class="line">	// 方式3</span><br><span class="line">	c := map[string]int&#123;&quot;no1&quot;: 1,&#125;</span><br><span class="line">	</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	fmt.Println(b)</span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	// 存放三个学生信息，每个学生有name和sex信息</span><br><span class="line">	students := make(map[string]map[string]string)</span><br><span class="line">	students[&quot;stu01&quot;] = make(map[string]string)</span><br><span class="line">	students[&quot;stu01&quot;][&quot;name&quot;] = &quot;tom&quot;</span><br><span class="line">	students[&quot;stu01&quot;][&quot;sex&quot;] = &quot;男&quot;</span><br><span class="line"></span><br><span class="line">	students[&quot;stu02&quot;] = map[string]string&#123;&quot;name&quot;: &quot;jack&quot;, &quot;sex&quot;: &quot;男&quot;&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(students)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>map的增删改查操作</p>
<ul>
<li><p>map[key] = value</p>
<ul>
<li>如果key不存在就是增加，如果key存在就是修改</li>
</ul>
</li>
<li><p>delete(map, key)</p>
<ul>
<li>当delete指定的key不存在时，删除不会操作，也不会报错</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	citys := make(map[string]string)</span><br><span class="line">	citys[&quot;city1&quot;] = &quot;北京&quot;</span><br><span class="line">	citys[&quot;city2&quot;] = &quot;广州&quot;</span><br><span class="line">	citys[&quot;city2&quot;] = &quot;广州~&quot;</span><br><span class="line">	fmt.Println(citys)</span><br><span class="line"></span><br><span class="line">	// map查找</span><br><span class="line">	val, ok := citys[&quot;city3&quot;]</span><br><span class="line">	if !ok &#123;</span><br><span class="line">		fmt.Println(&quot;city3不存在&quot;)</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		fmt.Printf(&quot;val=%v\n&quot;, val)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// map遍历</span><br><span class="line">	for key,val := range citys&#123;</span><br><span class="line">		fmt.Printf(&quot;key=%v, val=%v\n&quot;, key, val)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	delete(citys, &quot;city3&quot;)</span><br><span class="line"></span><br><span class="line">	// 一次性删除所有的key</span><br><span class="line">	// 方式一：遍历所有的key，逐一删除</span><br><span class="line">	// 方式二: 直接make一个新的空间</span><br><span class="line">	citys = make(map[string]string)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>map的长度</p>
<ul>
<li>len(map)</li>
</ul>
</li>
</ul>
</li>
<li><p>map切片</p>
<ul>
<li><p>切片的数据类型如果是map，就是map切片，map的个数可以动态变化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	// 1, 声明一个map切片</span><br><span class="line">	var students []map[string]string </span><br><span class="line">	students = make([]map[string]string, 2)</span><br><span class="line">	if students[0] == nil &#123;</span><br><span class="line">		students[0] = make(map[string]string, 2)</span><br><span class="line">		students[0][&quot;name&quot;] = &quot;Tom&quot;</span><br><span class="line">		students[0][&quot;age&quot;] = &quot;20&quot;</span><br><span class="line">	&#125;</span><br><span class="line">	students[1] = map[string]string&#123;&quot;name&quot;: &quot;jack&quot;, &quot;age&quot;: &quot;30&quot;&#125;</span><br><span class="line"></span><br><span class="line">	students = append(students, map[string]string&#123;&quot;name&quot;: &quot;tony&quot;, &quot;age&quot;: &quot;30&quot;&#125;)</span><br><span class="line">	fmt.Println(students)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>map排序</p>
<ol>
<li><p>先将map的key放入到切片中</p>
</li>
<li><p>对切片排序</p>
</li>
<li><p>遍历切片，然后按照key来数组map的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">func main()&#123;</span><br><span class="line">	m := map[int]int&#123;1: 10, 10: 100, 4: 30, 6: 50&#125;</span><br><span class="line"></span><br><span class="line">	// for k, v := range m &#123;</span><br><span class="line">	// 	fmt.Printf(&quot;k=%d, v=%d\n&quot;, k, v)</span><br><span class="line">	// &#125;</span><br><span class="line">	keys := []int&#123;&#125;</span><br><span class="line">	for k, _ := range m&#123;</span><br><span class="line">		keys = append(keys, k)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	sort.Ints(keys)</span><br><span class="line">	fmt.Println(keys)</span><br><span class="line"></span><br><span class="line">	for _, key := range keys &#123;</span><br><span class="line">		fmt.Printf(&quot;m[%d]=%d\n&quot;, key, m[key])</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>map使用细节</p>
<ul>
<li><p>map是引用类型，遵守引用类型机制，在一个函数接收map，修改map的值后，会直接修改原来的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func modify(map1 map[string]int)&#123;</span><br><span class="line">	map1[&quot;a&quot;] = 100</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	m1 := map[string]int&#123;&quot;b&quot;: 2, &quot;c&quot;: 3&#125;</span><br><span class="line">	fmt.Println(m1)</span><br><span class="line">	modify(m1)</span><br><span class="line">	fmt.Println (m1)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>map能动态增长键值对</p>
</li>
<li><p>map的value可以使用struct，适合管理复杂的数据类型</p>
</li>
</ul>
</li>
<li><p>练习</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func modifyUser(user map[string]map[string]string, name string)&#123;</span><br><span class="line">	if user[name] != nil&#123;</span><br><span class="line">		user[name][&quot;passwd&quot;] = &quot;888888&quot;</span><br><span class="line">	&#125;else &#123;</span><br><span class="line">		user[name] = map[string]string&#123;&quot;nickname&quot;: name, &quot;passwd&quot;: &quot;888888&quot;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	users := map[string]map[string]string&#123;&#125;</span><br><span class="line"></span><br><span class="line">	modifyUser(users, &quot;tom&quot;)</span><br><span class="line">	modifyUser(users, &quot;tony&quot;)</span><br><span class="line">	fmt.Println(users)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="48-面向对象编程"><a href="#48-面向对象编程" class="headerlink" title="48, 面向对象编程"></a>48, 面向对象编程</h5><ul>
<li><p>说明</p>
<ul>
<li><p>go的结构体和其它语言的类有同等地位</p>
</li>
<li><p>go的面向编程去掉了传统oop的继承，方法重载，构造函数，析构函数</p>
</li>
<li><p>go仍然有继承，封装，多态的特性，实现方式与其它oop不同</p>
</li>
<li><p>在创建一个结构体变量后，如果没有给字段赋值，都对应一个零值。指针,slice,和map的零值都是nil，即还没分配空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">type Cat struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int </span><br><span class="line">	other map[string]string</span><br><span class="line">	slice []int </span><br><span class="line">	ptr *int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	cat := Cat&#123;Name: &quot;tom&quot;&#125;</span><br><span class="line">	if cat.other == nil&#123;</span><br><span class="line">		fmt.Println(&quot;other is nil&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if cat.slice == nil&#123;</span><br><span class="line">		fmt.Println(&quot;slice is nil&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if cat.ptr == nil&#123;</span><br><span class="line">		fmt.Println(&quot;ptr is nil&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不同的结构体变量的字段独立</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">type Cat struct&#123;</span><br><span class="line">	Name string</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	cat1 := Cat&#123;&quot;tom&quot;&#125;</span><br><span class="line"></span><br><span class="line">	cat2 := cat1 </span><br><span class="line"></span><br><span class="line">	cat2.Name = &quot;jack&quot;</span><br><span class="line"></span><br><span class="line">	fmt.Println(cat1)</span><br><span class="line">	fmt.Println(cat2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>结构体实例创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">type Person struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	// 方式一</span><br><span class="line">	var p1 Person</span><br><span class="line">	p1.Name = &quot;tom&quot;</span><br><span class="line">	p1.Age = 11</span><br><span class="line">	fmt.Println(p1)</span><br><span class="line"></span><br><span class="line">	// 方式二</span><br><span class="line">	p2 := Person&#123;&quot;jack&quot;, 12&#125;</span><br><span class="line">	fmt.Println(p2)</span><br><span class="line"></span><br><span class="line">	// 方式三</span><br><span class="line">	var p3 *Person = new(Person)</span><br><span class="line">	// (*p3).Name = &quot;mary&quot; 等价于 p3.Name = &quot;mary&quot;</span><br><span class="line">	// 原因是go的设计者，为了使用方便，底层会对 p3.Name = &quot;mary&quot; 进行处理</span><br><span class="line">	// 会给p3 加上取值运算符 (*p3).Name = &quot;mary&quot;</span><br><span class="line">	p3.Name = &quot;mary&quot;</span><br><span class="line">	p3.Age = 14</span><br><span class="line">	fmt.Println(*p3)</span><br><span class="line"></span><br><span class="line">	// 方式4</span><br><span class="line">	var p4 *Person = &amp;Person&#123;&quot;smith&quot;, 15&#125;</span><br><span class="line">	fmt.Println(*p4)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体内存分配机制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">type Person struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	// 方式一</span><br><span class="line">	var p1 Person</span><br><span class="line">	p1.Name = &quot;tom&quot;</span><br><span class="line">	p1.Age = 11</span><br><span class="line">	</span><br><span class="line">	p2 := &amp;p1 </span><br><span class="line"></span><br><span class="line">	p2.Name = &quot;jack&quot;</span><br><span class="line"></span><br><span class="line">	fmt.Println(p1)</span><br><span class="line">	fmt.Println(*p2)</span><br><span class="line">	fmt.Printf(&quot;p2的地址%p, p2的值%p&quot;, &amp;p2, p2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体使用细节</p>
<ul>
<li><p>结构体的所有字段在内存的分配是连续的</p>
</li>
<li><p>结构是用户单独定义的类型，和其它类型进行转换是需要有完全相同的字段（名字，个数，类型）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">type A struct &#123;</span><br><span class="line">	Num int </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type B struct&#123;</span><br><span class="line">	Num int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	var a A</span><br><span class="line">	var b B </span><br><span class="line">	a = A(b)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体进行type重新定义(相当于取别名)，golang认为是新的数据类型，但是相互间可以强转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">type Student struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Stu Student</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	var stu1 Student</span><br><span class="line">	var stu2 Stu </span><br><span class="line">	stu2 = Stu(stu1)  // 不能stu2 = stu1</span><br><span class="line">	fmt.Println(stu2)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>struct的每个字段上都可以写一个tag，该tag可以通过反射机制获取，常见的使用场景就是序列化和反序列化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">type Hero struct&#123;</span><br><span class="line">	Name string `json:&quot;name&quot;`   // `json:&quot;name&quot;`就是struct tag</span><br><span class="line">	Skill string `json:&quot;skill&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	h1 := Hero&#123;&quot;hero1&quot;, &quot;skill1&quot;&#125;</span><br><span class="line">	jsonStr, err := json.Marshal(h1)</span><br><span class="line">	if err != nil&#123;</span><br><span class="line">		fmt.Println(&quot;json 处理错误&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(string(jsonStr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li><p>go中的方法是作用在指定的数据类型上的，自定义类型都可以有方法，不只是在struct</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">type Hero struct&#123;</span><br><span class="line">	Name string `json:&quot;name&quot;`   // `json:&quot;name&quot;`就是struct tag</span><br><span class="line">	Skill string `json:&quot;skill&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (h Hero) test()&#123;</span><br><span class="line">	fmt.Println(&quot;test()&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	h := Hero&#123;&quot;hero1&quot;, &quot;skill1&quot;&#125;</span><br><span class="line">	h.test()</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 1，test方法和Person类型绑定</span><br><span class="line">// 2，test方法只能通过Person类型的变量调用，而不能直接调用，也不能</span><br><span class="line">// 	使用其它类型变量调用</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>方法调用和传参机制原理</p>
<ul>
<li><p>方法的调用和传参机制与函数基本一致，不一样的地方是方法调用时，会将调用方法的变量，当做实参传递给方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">type Circle struct&#123;</span><br><span class="line">	radius float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (c Circle) area() float64&#123;</span><br><span class="line">	return 3.14 * c.radius * c.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	c := Circle&#123;4.0&#125;</span><br><span class="line"></span><br><span class="line">	res := c.area()</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方法的声明</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func (receiver type) methonName(参数列表) (返回值列表)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// receiver type: 表示这个方法和type这个类型进行绑定，或者说这个方法作用于type类型</span><br><span class="line">// receiver type: type可以是结构体，也可以是自定义类型的type</span><br><span class="line">// receive：就是type类型的一个实例</span><br></pre></td></tr></table></figure></li>
<li><p>方法的注意事项和细节</p>
<ul>
<li><p>结构体类型是值类型，在调用中遵守值类型的传递机制，是值拷贝传递方式</p>
</li>
<li><p>修改结构体变量的值，可以通过结构体指针的方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">type Circle struct&#123;</span><br><span class="line">	radius float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 为了提高效率，通常我们让方法和结构体的指针类型绑定</span><br><span class="line">func (c *Circle) area() float64&#123;</span><br><span class="line">	(*c).radius = 10</span><br><span class="line">	return 3.14 * c.radius * c.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	c := Circle&#123;4.0&#125;</span><br><span class="line"></span><br><span class="line">	res := c.area()</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">	fmt.Printf(&quot;c.radius=%v&quot;, c.radius)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>go中方法是作用在指定的数据类型上的，因此自定义类型，都可以有方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">type integer int </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (i integer) print() &#123;</span><br><span class="line">	fmt.Printf(&quot;i=%v&quot;, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (i *integer) change()&#123;</span><br><span class="line">	*i += 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	var i integer = 10</span><br><span class="line">	i.print()</span><br><span class="line">	i.change()</span><br><span class="line">	fmt.Println(&quot;i=&quot;, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>方法的访问范围控制规则和函数一样</p>
</li>
<li><p>如果一个类型实现了String()这个方法，那么fmt.Println会默认调用这个变量的String()进行输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">type Student struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 此处重写String方法 不能绑定(stu *Student)</span><br><span class="line">func (stu Student) String() string&#123;</span><br><span class="line">	str := fmt.Sprintf(&quot;stu.Name=%v&quot;, stu.Name)</span><br><span class="line">	return str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	stu := Student&#123;&quot;tom&quot;&#125;</span><br><span class="line">	fmt.Println(&amp;stu)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>练习题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">type MethodUtils struct&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (meth MethodUtils) Print(m, n int)&#123;</span><br><span class="line">	for i:=1;i &lt;= m;i++&#123;</span><br><span class="line">		for j:=1;j&lt;=n;j++&#123;</span><br><span class="line">			fmt.Printf(&quot;*&quot;)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (meth MethodUtils) Area(len, width float64) float64 &#123;</span><br><span class="line">	return len * width</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (meth *MethodUtils) JudgeNum(num int) bool &#123;</span><br><span class="line">	if num &amp; 1 == 0&#123;</span><br><span class="line">		return true</span><br><span class="line">	&#125;</span><br><span class="line">	return false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	me := MethodUtils&#123;&#125;</span><br><span class="line">	me.Print(2, 6)</span><br><span class="line">	area := me.Area(2, 6)</span><br><span class="line">	fmt.Printf(&quot;area=%v\n&quot;, area)</span><br><span class="line"></span><br><span class="line">	flag := me.JudgeNum(10)</span><br><span class="line">	fmt.Printf(&quot;flag=%v\n&quot;, flag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>方法与函数的区别</p>
<ul>
<li><p>调用方式不一样</p>
</li>
<li><p>对应普通函数，接收者是值类型时，不能将指针类型的数据直接传递，反之亦然</p>
</li>
<li><p>对于方法，接收者为值类型时，可以直接用指针类型的变量调用方法，反之亦然</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">type Test struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (t Test) test01()&#123;</span><br><span class="line">	t.Name = &quot;test01&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (t *Test) test02()&#123;</span><br><span class="line">	t.Name = &quot;test02&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	t := Test&#123;&quot;t&quot;&#125;</span><br><span class="line"></span><br><span class="line">	(&amp;t).test01()  // 从形式上看是传入地址，但本质仍然是值拷贝</span><br><span class="line">	fmt.Println(t.Name)</span><br><span class="line"></span><br><span class="line">	t.test02()</span><br><span class="line">	fmt.Println(t.Name) // 本质上是传入的指针</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">总结：</span><br><span class="line">	不管调用形式如何，真正决定是值拷贝还是地址拷贝，看这个方法和哪个类型绑定</span><br><span class="line">	</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>创建结构体变量时指定字段的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">type Student struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	// 方式一</span><br><span class="line">	var stu1 = Student&#123;&quot;tom&quot;, 19&#125;</span><br><span class="line"></span><br><span class="line">	stu2 := Student&#123;&quot;jack&quot;, 20&#125;</span><br><span class="line"></span><br><span class="line">	var stu3 Student = Student&#123;</span><br><span class="line">		Name: &quot;smith&quot;,</span><br><span class="line">		Age: 22,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(stu1, stu2, stu3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	// 方式二</span><br><span class="line">	var stu4 = &amp;Student&#123;&quot;mary&quot;, 15&#125;</span><br><span class="line">	stu5 := &amp;Student&#123;&quot;xiaohong&quot;, 30&#125;</span><br><span class="line">	stu6 := &amp;Student&#123;</span><br><span class="line">		Name: &quot;xiaoming&quot;,</span><br><span class="line">		Age: 28,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(stu4, stu5, stu6)</span><br><span class="line">	fmt.Println(*stu4, *stu5, *stu6)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>工厂模式</p>
<ul>
<li>go的结构体没有构造函数，我们使用工厂模式解决这个问题<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">type student struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	age int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 因为student结构体的首字母小写，因此只能在当前包使用</span><br><span class="line">// 我们用工厂模式解决</span><br><span class="line">func NewStudent(name string, age int) *student&#123;</span><br><span class="line">	return &amp;student&#123;name, age&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// age字段的首字母小写，在其它包不能直接访问，我们提供一个方法</span><br><span class="line">func (s *student) GetAge() int &#123;</span><br><span class="line">	return s.age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	stu := NewStudent(&quot;tom&quot;, 10)</span><br><span class="line">	fmt.Println(stu)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>面向对象的三大特性</p>
<ul>
<li><p>封装</p>
<ul>
<li><p>好处</p>
<ul>
<li>隐藏实现细节</li>
<li>可以对数据进行校验</li>
</ul>
</li>
<li><p>封装实现步骤</p>
<ol>
<li>将结构体，字段的首字母小写</li>
<li>给结构体所在的包提供一个工厂模式的函数</li>
<li>提供首字母大写的Set方法</li>
<li>提供首字母大写的Get方法</li>
<li>说明:go中没有特别强调封装</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">type person struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	age int </span><br><span class="line">	sal float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 工厂模式</span><br><span class="line">func NewPerson(name string) *person&#123;</span><br><span class="line">	return &amp;person&#123;Name: name&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *person) SetAge(age int)&#123;</span><br><span class="line">	if age &gt; 0 &amp;&amp; age &lt;= 150&#123;</span><br><span class="line">		p.age = age</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		fmt.Println(&quot;输入正确的年龄&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (p *person) GetAge() int&#123;</span><br><span class="line">	return p.age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (p *person) SetSal(sal float64)&#123;</span><br><span class="line">	p.sal = sal </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (p *person) GetSal() float64&#123;</span><br><span class="line">	return p.sal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line"></span><br><span class="line">	p := NewPerson(&quot;tom&quot;)</span><br><span class="line">	p.SetAge(30)</span><br><span class="line">	p.SetSal(5000)</span><br><span class="line">	fmt.Println(p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>继承</p>
<ul>
<li><p>基本介绍</p>
<ul>
<li>解决代码复用</li>
<li>go中一个struct嵌套了另一个匿名结构体，这个结构体可以直接访问匿名结构体的字段和方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// 匿名结构体实现继承</span><br><span class="line"></span><br><span class="line">type Student struct &#123;</span><br><span class="line">	Name string</span><br><span class="line">	Age int </span><br><span class="line">	score float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (stu *Student) ShowInfo()&#123;</span><br><span class="line">	fmt.Println(stu)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (stu *Student) SetScore(score float64)&#123;</span><br><span class="line">	stu.score = score</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Pupil struct&#123;</span><br><span class="line">	Student</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (pupil *Pupil) testing()&#123;</span><br><span class="line">	fmt.Println(&quot;小学生正在考试中&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Graduate struct&#123;</span><br><span class="line"></span><br><span class="line">	Student</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func (grad *Graduate) testing()&#123;</span><br><span class="line">	fmt.Println(&quot;大学生正在考试中&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	pupil := &amp;Pupil&#123;&#125;</span><br><span class="line">	pupil.Name = &quot;tom&quot;</span><br><span class="line">	pupil.Age = 10</span><br><span class="line">	pupil.SetScore(100)</span><br><span class="line">	pupil.ShowInfo()</span><br><span class="line">	pupil.testing()</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>继承的深入讨论</p>
<ul>
<li><p>结构体可以使用嵌套匿名结构体的所有字段和方法</p>
</li>
<li><p>匿名结构体的字段访问可以简化</p>
</li>
<li><p>当结构体和嵌套匿名结构体有相同的字段或方法时，编译器采用就近访问原则。如果希望访问匿名结构体的字段和方法，可以通过匿名结构体区分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">type A struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	age int </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *A) SayOk()&#123;</span><br><span class="line">	fmt.Println(&quot;A SayOk&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *A) hello()&#123;</span><br><span class="line">	fmt.Println(&quot;A hello&quot;, a.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type B struct&#123;</span><br><span class="line">	A </span><br><span class="line">	Name string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (b *B) SayOk()&#123;</span><br><span class="line">	fmt.Println(&quot;B SayOk&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (b *B) hello()&#123;</span><br><span class="line">	fmt.Println(&quot;B hello&quot;, b.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	b := &amp;B&#123;&#125;</span><br><span class="line">	b.Name = &quot;jack&quot;</span><br><span class="line">	b.SayOk()</span><br><span class="line">	b.hello()</span><br><span class="line">	b.A.hello()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体嵌入多个匿名结构体时，如果两个匿名结构体有相同的字段和方法（结构体本身没有相同的字段和方法), 在访问时必须要指定匿名结构体的名字，否则编译报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">type A struct &#123;</span><br><span class="line">	Name string</span><br><span class="line">	age int </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type B struct&#123;</span><br><span class="line">	Name string</span><br><span class="line">	Score float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type C struct&#123;</span><br><span class="line">	A</span><br><span class="line">	B</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main()&#123;</span><br><span class="line">	</span><br><span class="line">	c := &amp;C&#123;&#125;</span><br><span class="line">	c.A.Name = &quot;tom&quot;    // c.Name = &quot;tom&quot;会编译报错</span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>如果一个结构体嵌套了一个有名的结构体，这种模式就是组合，如果是组合，name在访问组合的结构体的字段或方法时，必须带上结构体的名字</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C <span class="keyword">struct</span>&#123;</span><br><span class="line">	a A     <span class="comment">// 嵌套命名结构体就是组合</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	c := &amp;C&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	c.a.Name = <span class="string">&quot;tom&quot;</span>   <span class="comment">// c.Name = &quot;tom&quot;会编译报错, 在访问命名结构体的字段和方法时，必须带上名字</span></span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>嵌套匿名结构体后，也可以在创建结构体实例时，直接指定各个匿名结构体字段的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span>&#123;</span><br><span class="line">	Score <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C <span class="keyword">struct</span>&#123;</span><br><span class="line">	A</span><br><span class="line">	B</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	c := &amp;C&#123;A&#123;<span class="string">&quot;tom&quot;</span>, <span class="number">10</span>&#125;, B&#123;<span class="number">100</span>&#125;&#125;</span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span>&#123;</span><br><span class="line">	Score <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C <span class="keyword">struct</span>&#123;</span><br><span class="line">	*A</span><br><span class="line">	*B</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	c := &amp;C&#123;&amp;A&#123;<span class="string">&quot;tom&quot;</span>, <span class="number">10</span>&#125;, &amp;B&#123;<span class="number">100</span>&#125;&#125;</span><br><span class="line">	fmt.Println(c)</span><br><span class="line">	fmt.Println(*c.A, *c.B)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名字段是基本数据类型</span></span><br><span class="line"><span class="comment">// 只能存在一个匿名的int类型</span></span><br><span class="line"><span class="keyword">type</span> Test <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	<span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	t := Test&#123;<span class="string">&quot;tom&quot;</span>, <span class="number">100</span>&#125;</span><br><span class="line">	fmt.Println(t.<span class="keyword">int</span>)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>多重继承</p>
<ul>
<li>一个struct嵌套了多个匿名结构体</li>
</ul>
</li>
</ul>
</li>
<li><p>多态</p>
<ul>
<li><p>多态参数</p>
</li>
<li><p>多态数组</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span>&#123;</span><br><span class="line">	Start()</span><br><span class="line">	Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Start</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;手机开始工作&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;手机停止工作&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Camera <span class="keyword">struct</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Start</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;相机开始工作&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;相机停止工作&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 定义一个Usb接口数组，可以存放Phone和Camera的结构体变量</span></span><br><span class="line">	<span class="comment">// 多态让一个数组存放了不同类型的数据</span></span><br><span class="line">	<span class="keyword">var</span> usbArr [<span class="number">3</span>]Usb </span><br><span class="line">	usbArr[<span class="number">0</span>] = Phone&#123;&#125;</span><br><span class="line">	usbArr[<span class="number">1</span>] = Phone&#123;&#125;</span><br><span class="line">	usbArr[<span class="number">2</span>] = Camera&#123;&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(usbArr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="49，接口"><a href="#49，接口" class="headerlink" title="49，接口"></a>49，接口</h5><ul>
<li><p>基本介绍</p>
<ul>
<li>接口里的所有方法都没有实现，接口体现了程序设计的多态和高内聚低耦合的思想</li>
<li>go的接口不需要显式的实现，只要一有变量，含有接口的所有方法，那么这个变量就实现这个接口</li>
</ul>
</li>
<li><p>应用场景</p>
<ul>
<li>项目经理定接口，开发具体实现</li>
</ul>
</li>
<li><p>注意事项和说明</p>
<ul>
<li><p>接口本身不能创建实例，但是可以指向一个实现了该接口的自定义类型的实例</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Stu)</span> <span class="title">Say</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Stu Say()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	stu := Stu&#123;<span class="string">&quot;tom&quot;</span>&#125;</span><br><span class="line">	interf := stu </span><br><span class="line"></span><br><span class="line">	interf.Say()</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口中所有的方法没有方法体，即是没有实现的方法</p>
</li>
<li><p>在go中，一个自定义类型需要将某个接口的所有方法都实现，我们才说这个自定义类型实现了该接口</p>
</li>
<li><p>一个自定义类型只有实现了某个接口，我们才将该自定义类型的实例赋值给接口类型</p>
</li>
<li><p>只要是自定义类型，就可以实现接口，不仅仅是结构体类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Integer <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(integer Integer)</span> <span class="title">Say</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Stu Say()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> integer Integer = <span class="number">10</span></span><br><span class="line">	interf := integer </span><br><span class="line"></span><br><span class="line">	interf.Say()</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>一个自定义类型可以实现多个接口</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Hello()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Integer <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(integer Integer)</span> <span class="title">Say</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Say()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(integer Integer)</span> <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Hello()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> integer Integer = <span class="number">10</span></span><br><span class="line">	aInterf := integer</span><br><span class="line">	bInterf := integer</span><br><span class="line"></span><br><span class="line">	aInterf.Hello()</span><br><span class="line">	bInterf.Hello()</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>go接口中不能有任何变量</p>
</li>
<li><p>一个接口(A接口)可以继承多个别的接口(比如B,C接口), 这时如果要实现A接口，也必须将B, C的接口的方法全部实现</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	test01()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	test02()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	BInterface</span><br><span class="line">	CInterface</span><br><span class="line">	test03()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Stu)</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;test01&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Stu)</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;test02&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Stu)</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;test03&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(a AInterface)</span></span> &#123;</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	stu := Stu&#123;&#125;</span><br><span class="line">	<span class="comment">// test01, test02, test03有任何一个方法未实现，都会报错</span></span><br><span class="line">	test(&amp;stu)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>interface类型默认是一个指针（引用类型）, 如果没有对interface初始化就使用，会输出nil</p>
</li>
<li><p>空接口interface{}没有任何方法，所以所有的类型都实现了空接口，即我们可以将任何一个变量赋值为空接口</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Test <span class="keyword">interface</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	<span class="keyword">var</span> test Test = a</span><br><span class="line">	fmt.Println(test)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Test <span class="keyword">interface</span>&#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Stu)</span> <span class="title">Say</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;say()&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> test Test</span><br><span class="line">	stu := Stu&#123;&#125;</span><br><span class="line">	test = &amp;stu   <span class="comment">// 不能使用test=stu</span></span><br><span class="line">	fmt.Println(test)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Test01()</span><br><span class="line">	Test02()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	Test01()</span><br><span class="line">	Test03()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CInterface <span class="keyword">interface</span>&#123;</span><br><span class="line">	AInterface</span><br><span class="line">	BInterface</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> c CInterface</span><br><span class="line">	fmt.Println(c)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CInterface有两个Test01(), 旧的版本可能会报重复定义</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>接口最佳实践</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HeroSlice []Hero</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(hs)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Less方法就是决定使用什么标准排序</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> hs[i].Age &lt; hs[j].Age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	hs[i], hs[j] = hs[j], hs[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> intSlice = []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">90</span>&#125;</span><br><span class="line">	sort.Ints(intSlice)</span><br><span class="line">	fmt.Println(intSlice) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> heroes HeroSlice</span><br><span class="line">	<span class="keyword">for</span> i:= <span class="number">0</span>; i&lt; <span class="number">20</span>; i++ &#123;</span><br><span class="line">		hero := Hero&#123;</span><br><span class="line">			Name : fmt.Sprintf(<span class="string">&quot;英雄~%d&quot;</span>, rand.Intn(<span class="number">100</span>)),</span><br><span class="line">			Age: rand.Intn(<span class="number">100</span>),</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(hero)</span><br><span class="line">		heroes = <span class="built_in">append</span>(heroes, hero)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(heroes)</span><br><span class="line">	sort.Sort(heroes)</span><br><span class="line">	fmt.Println(heroes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口与继承的关系</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Monkey <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BirdAble <span class="keyword">interface</span>&#123;</span><br><span class="line">	Flying()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FishAble <span class="keyword">interface</span>&#123;</span><br><span class="line">	Swiming()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Monkey)</span> <span class="title">climbing</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;climbing&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> LittleMonkey <span class="keyword">struct</span>&#123;</span><br><span class="line">	Monkey</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LittleMonkey)</span> <span class="title">Flying</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;通过学习，学会飞翔&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LittleMonkey)</span> <span class="title">Swiming</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;通过学习，学会游泳&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	monkey := LittleMonkey&#123;</span><br><span class="line">		Monkey&#123;</span><br><span class="line">			Name: <span class="string">&quot;monkey&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	monkey.climbing()</span><br><span class="line">	monkey.Flying()</span><br><span class="line">	monkey.Swiming()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当A结构体继承了B结构体，那么A结构体就自定继承了B结构体的字段和方法</span></span><br><span class="line"> <span class="comment">// 当A结构体需要扩展功能，同时不希望去破坏继承关系，则可以去实现某个接口即可。因此我们可以认为，实现接口是对继承机制的补充</span></span><br></pre></td></tr></table></figure>

<ul>
<li>接口和继承解决的问题不同<ul>
<li>继承的价值在于解决代码的复用性和可维护性</li>
<li>接口的价值在于设计，设计好各种规范 </li>
</ul>
</li>
<li>接口比继承更加灵活<ul>
<li>继承满足is的关系，接口只需满足like的关系</li>
</ul>
</li>
<li>接口在一定程度上实现代码解耦</li>
</ul>
</li>
</ul>
<h5 id="50-类型断言"><a href="#50-类型断言" class="headerlink" title="50,类型断言"></a>50,类型断言</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123;</span><br><span class="line">	x <span class="keyword">int</span> </span><br><span class="line">	y <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> point Point = Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	a = point</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b Point</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 不能直接使用 b = a</span></span><br><span class="line">	b = a.(Point) </span><br><span class="line"></span><br><span class="line">	fmt.Println(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">float32</span> = <span class="number">1.2</span> </span><br><span class="line">	x = b </span><br><span class="line">	y := x.(<span class="keyword">float32</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type=%T, val=%v&quot;</span>, y, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行类型断言时，如果类型不匹配，就会报panic， 因此进行类型断言时， 要确保原来的空接口指向的就是断言的类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 带检查的类型断言</span></span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">float32</span> = <span class="number">1.2</span> </span><br><span class="line">	x = b </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> y, ok := x.(<span class="keyword">float64</span>);ok &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;转换成功&quot;</span>)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;type=%T, val=%v&quot;</span>, y, y)</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;转换失败&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;程序继续执行&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>最佳实践</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> phone, ok := usb.(Phone); ok &#123;</span><br><span class="line">    phone.Call()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断参数的类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TypeJudge</span><span class="params">(items... <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> _, x := <span class="keyword">range</span> items &#123;</span><br><span class="line">		<span class="keyword">switch</span> x.(<span class="keyword">type</span>)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">bool</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;bool&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;float64&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">int</span>, <span class="keyword">int64</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;int&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;nil&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;string&quot;</span>)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n1 := <span class="number">100</span></span><br><span class="line">	n2 := <span class="number">3.2</span></span><br><span class="line">	TypeJudge(n1, n2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="51，文件操作"><a href="#51，文件操作" class="headerlink" title="51，文件操作"></a>51，文件操作</h5><ul>
<li><p>基本介绍</p>
<ul>
<li>流：数据在数据源和程序之间经历的路径<ul>
<li>输入流：数据从数据源（文件）到程序（内存）的路径</li>
<li>输出流：数据从程序到数据源的路径</li>
</ul>
</li>
</ul>
</li>
<li><p>常用的文件操作函数</p>
<ul>
<li><p>os.Open()</p>
</li>
<li><p>os.Close()</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	file, err := os.Open(<span class="string">&quot;./test1.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;file=%v&quot;</span>, file)</span><br><span class="line">	err = file.Close()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;关闭文件失败&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>读文件操作应用实例</p>
<ul>
<li><p>带缓冲</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	file, err := os.Open(<span class="string">&quot;./test.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 程序退出时，要及时关闭file</span></span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建一个*Reader, 带缓冲的</span></span><br><span class="line">	<span class="comment">// 默认缓冲区为4096</span></span><br><span class="line">	reader := bufio.NewReader(file)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		str, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Print(str)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不带缓冲</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fileName := <span class="string">&quot;./test.txt&quot;</span></span><br><span class="line">	content, err := ioutil.ReadFile(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, content)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, <span class="keyword">string</span>(content))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 因为我们没有显式的Open文件，不需要close文件， open和close被封装到ReadFile中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>写文件操作实例</p>
<ul>
<li><p>os.OpenFile(name string, flag int, perm FileMode)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flag</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">// Exactly one of O_RDONLY, O_WRONLY, or O_RDWR must be specified.</span></span><br><span class="line">	O_RDONLY <span class="keyword">int</span> = syscall.O_RDONLY <span class="comment">// open the file read-only.</span></span><br><span class="line">	O_WRONLY <span class="keyword">int</span> = syscall.O_WRONLY <span class="comment">// open the file write-only.</span></span><br><span class="line">	O_RDWR   <span class="keyword">int</span> = syscall.O_RDWR   <span class="comment">// open the file read-write.</span></span><br><span class="line">	<span class="comment">// The remaining values may be or&#x27;ed in to control behavior.</span></span><br><span class="line">	O_APPEND <span class="keyword">int</span> = syscall.O_APPEND <span class="comment">// append data to the file when writing.</span></span><br><span class="line">	O_CREATE <span class="keyword">int</span> = syscall.O_CREAT  <span class="comment">// create a new file if none exists.</span></span><br><span class="line">	O_EXCL   <span class="keyword">int</span> = syscall.O_EXCL   <span class="comment">// used with O_CREATE, file must not exist.</span></span><br><span class="line">	O_SYNC   <span class="keyword">int</span> = syscall.O_SYNC   <span class="comment">// open for synchronous I/O.</span></span><br><span class="line">	O_TRUNC  <span class="keyword">int</span> = syscall.O_TRUNC  <span class="comment">// truncate regular writable file when opened.</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// perm</span></span><br><span class="line"><span class="comment">// r -&gt; 4</span></span><br><span class="line"><span class="comment">// w -&gt; 2</span></span><br><span class="line"><span class="comment">// x -&gt; 1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 1，打开文件</span></span><br><span class="line">	file, err := os.OpenFile(<span class="string">&quot;./test1.txt&quot;</span>, os.O_CREATE | os.O_WRONLY, <span class="number">0666</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	str := <span class="string">&quot;go go go\n&quot;</span></span><br><span class="line"></span><br><span class="line">	writer := bufio.NewWriter(file)</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i &lt; <span class="number">3</span>;i++&#123;</span><br><span class="line">		writer.WriteString(str)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// writer是带缓冲的，因此写入的时候是先写到缓冲区的，所有需要调用</span></span><br><span class="line">	<span class="comment">// flush方法，将缓冲区的内容刷新到文件</span></span><br><span class="line">	writer.Flush()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 1，打开文件</span></span><br><span class="line">	file, err := os.OpenFile(<span class="string">&quot;./test1.txt&quot;</span>, os.O_RDONLY | os.O_APPEND, <span class="number">0666</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line">	reader := bufio.NewReader(file)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		str, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(str)</span><br><span class="line">	&#125;</span><br><span class="line">	str := <span class="string">&quot;ABC\n&quot;</span></span><br><span class="line"></span><br><span class="line">	writer := bufio.NewWriter(file)</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i &lt; <span class="number">10</span>;i++&#123;</span><br><span class="line">		writer.WriteString(str)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// writer是带缓冲的，因此写入的时候是先写到缓冲区的，所有需要调用</span></span><br><span class="line">	<span class="comment">// flush方法，将缓冲区的内容刷新到文件</span></span><br><span class="line">	writer.Flush()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将一个文件的内容写入到另外一个文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	readStr, err := ioutil.ReadFile(<span class="string">&quot;./test.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	err = ioutil.WriteFile(<span class="string">&quot;./test1.txt&quot;</span>, readStr, <span class="number">0666</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>判断文件是否存在</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PathExists</span><span class="params">(path <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span>&#123;</span><br><span class="line">	_, err := os.Stat(path)</span><br><span class="line">	<span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> os.IsNotExist(err)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Print(PathExists(<span class="string">&quot;test1.txt&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>拷贝文件</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以处理大文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CopyFile</span><span class="params">(dstFileName <span class="keyword">string</span>, SrcFileName <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int64</span>, error)</span></span> &#123;</span><br><span class="line">	srcFile, err := os.Open(SrcFileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> srcFile.Close()</span><br><span class="line">	reader := bufio.NewReader(srcFile)</span><br><span class="line"></span><br><span class="line">	dstFile, err := os.OpenFile(dstFileName, os.O_WRONLY|os.O_CREATE, <span class="number">0666</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	writer := bufio.NewWriter(dstFile)</span><br><span class="line">	<span class="keyword">defer</span> dstFile.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> io.Copy(writer, reader)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	_, err := CopyFile(<span class="string">&quot;test3.txt&quot;</span>,<span class="string">&quot;./test.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> CharCount <span class="keyword">struct</span>&#123;</span><br><span class="line">	ChCount <span class="keyword">int</span> </span><br><span class="line">	NumCount <span class="keyword">int</span> </span><br><span class="line">	SpaceCount <span class="keyword">int</span> </span><br><span class="line">	OtherCount <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 打开一个文件，创建一个reader</span></span><br><span class="line">	<span class="comment">// 每读取一行， 就统计英文，数字，空格和其它字符</span></span><br><span class="line">	<span class="comment">// 保存到结构体中</span></span><br><span class="line">	file, err := os.Open(<span class="string">&quot;./main/test1.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line">	reader := bufio.NewReader(file)</span><br><span class="line">	<span class="keyword">var</span> count CharCount</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		str, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF&#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		new_str := []<span class="keyword">rune</span>(str)</span><br><span class="line">		<span class="keyword">for</span> _, v := <span class="keyword">range</span> new_str&#123;</span><br><span class="line">			<span class="keyword">switch</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> v &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; v &lt;= <span class="string">&#x27;z&#x27;</span>:</span><br><span class="line">				<span class="keyword">fallthrough</span></span><br><span class="line">			<span class="keyword">case</span> v &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; v &lt;= <span class="string">&#x27;Z&#x27;</span>:</span><br><span class="line">				count.ChCount ++</span><br><span class="line">			<span class="keyword">case</span> v == <span class="string">&#x27; &#x27;</span> &amp;&amp; v == <span class="string">&#x27;\t&#x27;</span>:</span><br><span class="line">				count.SpaceCount ++</span><br><span class="line">			<span class="keyword">case</span> v &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; v &lt;= <span class="string">&#x27;9&#x27;</span>:</span><br><span class="line">				count.NumCount ++</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				count.OtherCount ++</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="52-命令行参数"><a href="#52-命令行参数" class="headerlink" title="52, 命令行参数"></a>52, 命令行参数</h5><ul>
<li><p>os.Args</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;命令行参数有：&quot;</span>, <span class="built_in">len</span>(os.Args))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ind, v := <span class="keyword">range</span> os.Args &#123;</span><br><span class="line">		fmt.Println(ind, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>flag包解析命令行参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> user, pwd, host <span class="keyword">string</span></span><br><span class="line">	<span class="keyword">var</span> port <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">	flag.StringVar(&amp;user, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;用户名&quot;</span>)</span><br><span class="line">	flag.StringVar(&amp;pwd, <span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;密码&quot;</span>)</span><br><span class="line">	flag.StringVar(&amp;host, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;主机名&quot;</span>)</span><br><span class="line">	flag.IntVar(&amp;port, <span class="string">&quot;p&quot;</span>, <span class="number">3306</span>, <span class="string">&quot;端口&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bixu 调用该方法</span></span><br><span class="line">	flag.Parse()</span><br><span class="line">	fmt.Println(user, pwd, host, port)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="53，序列化"><a href="#53，序列化" class="headerlink" title="53，序列化"></a>53，序列化</h5><ul>
<li><p>json基本介绍</p>
<ul>
<li><p>是一种轻量级的数据交换格式</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`json:&quot;user_name&quot;`</span> <span class="comment">// 序列化后的名字由我们自己定义</span></span><br><span class="line">	Age <span class="keyword">int</span> <span class="string">`json:&quot;user_age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	user := User&#123;</span><br><span class="line">		Name: <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age: <span class="number">20</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dic := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">	slice := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">	user_json, err := json.Marshal(&amp;user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, <span class="keyword">string</span>(user_json))</span><br><span class="line"></span><br><span class="line">	dic_json, err := json.Marshal(dic)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, <span class="keyword">string</span>(dic_json))</span><br><span class="line"></span><br><span class="line">	slice_json, err := json.Marshal(&amp;slice)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, <span class="keyword">string</span>(slice_json))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反序列化</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`json:&quot;user_name&quot;`</span></span><br><span class="line">	Age <span class="keyword">int</span> <span class="string">`json:&quot;user_age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	user_json := <span class="string">`&#123;&quot;user_name&quot;:&quot;tom&quot;,&quot;user_age&quot;:20&#125;`</span></span><br><span class="line"></span><br><span class="line">	dic_json := <span class="string">`&#123;&quot;a&quot;:1,&quot;b&quot;:2&#125;`</span></span><br><span class="line"></span><br><span class="line">	slice_json := <span class="string">`[1,2,3]`</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> user User </span><br><span class="line">	json.Unmarshal([]<span class="keyword">byte</span>(user_json), &amp;user)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;user=%v, type=%T\n&quot;</span>, user, user)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> dic <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span> </span><br><span class="line">	json.Unmarshal([]<span class="keyword">byte</span>(dic_json), &amp;dic)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;user=%v, type=%T\n&quot;</span>, dic, dic)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">int</span></span><br><span class="line">	json.Unmarshal([]<span class="keyword">byte</span>(slice_json), &amp;slice)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;user=%v, type=%T\n&quot;</span>, slice, slice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="54，单元测试"><a href="#54，单元测试" class="headerlink" title="54，单元测试"></a>54，单元测试</h5><ul>
<li><p>testing 框架</p>
<ul>
<li><p>go test -v</p>
</li>
<li><p>go test -v cal_test.go  cal.go 测试指定的文件,要带上被测的原文件</p>
</li>
<li><p>cal.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddUpper</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	res := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;=n;i++&#123;</span><br><span class="line">		res += i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSub</span><span class="params">(n1, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> n1 - n2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>cal_test.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAddUpper</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">	res := AddUpper(<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">if</span> res != <span class="number">55</span> &#123;</span><br><span class="line">		t.Fatalf(<span class="string">&quot;执行错误, 结果：%v\n&quot;</span>, res)</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;执行成功&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetSub</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">	res := getSub(<span class="number">100</span>, <span class="number">20</span>)</span><br><span class="line">	<span class="keyword">if</span> res != <span class="number">80</span> &#123;</span><br><span class="line">		t.Fatalf(<span class="string">&quot;执行错误, 结果：%v\n&quot;</span>, res)</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;执行成功，结果：%v\n&quot;</span>, res)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>注意测试用例的文件名以test.go结尾, 该文件的测试方法以Test开头</p>
</li>
</ul>
</li>
<li><p>例子</p>
<ul>
<li><p>monster.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> monster</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Monster <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span> </span><br><span class="line">	Skill <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Monster)</span> <span class="title">Store</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	data, err := json.Marshal(this)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	filePath := <span class="string">&quot;./test01.txt&quot;</span></span><br><span class="line">	err = ioutil.WriteFile(filePath, data, <span class="number">0666</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span> </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Monster)</span> <span class="title">ReStore</span><span class="params">()</span> <span class="title">bool</span></span>&#123;</span><br><span class="line">	filePath := <span class="string">&quot;./test01.txt&quot;</span></span><br><span class="line">	data, err := ioutil.ReadFile(filePath)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	err = json.Unmarshal(data, this)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>monster_test.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> monster </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStore</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">	monster := &amp;Monster&#123;</span><br><span class="line">		Name: <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age: <span class="number">20</span>, </span><br><span class="line">		Skill: <span class="string">&quot;skill1&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	res := monster.Store()</span><br><span class="line">	<span class="keyword">if</span> !res &#123;</span><br><span class="line">		t.Fatal(<span class="string">&quot;失败&quot;</span>) </span><br><span class="line">	&#125;</span><br><span class="line">	t.Log(<span class="string">&quot;成功&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestReStore</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">	monster := &amp;Monster&#123;&#125;</span><br><span class="line">	res := monster.ReStore()</span><br><span class="line">	<span class="keyword">if</span> !res &#123;</span><br><span class="line">		t.Fatalf(<span class="string">&quot;失败, monster=%v&quot;</span>, monster) </span><br><span class="line">	&#125;</span><br><span class="line">	t.Logf(<span class="string">&quot;成功, monster=%v&quot;</span>, monster)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="55，goroutine-协程"><a href="#55，goroutine-协程" class="headerlink" title="55，goroutine(协程)"></a>55，goroutine(协程)</h5><ul>
<li><p>goroutine基本介绍</p>
<ul>
<li><p>进程和线程说明</p>
<ul>
<li>进程是程序在操作系统的一次执行过程，是系统进行资源分配和调度的基本单位</li>
<li>线程是进程的一个执行实例，是程序执行的最小单元，它是比进程更小的能独立运行的基本单元</li>
<li>一个进程可以创建和销毁多个线程，同一个进程中的多个线程可以并发执行</li>
<li>一个程序至少有一个进程，一个进程至少有一个线程</li>
</ul>
</li>
<li><p>并发和并行</p>
<ul>
<li>多线程程序在单核上运行就是并发， 同一时刻只有一个任务在执行</li>
<li>多线程程序在多核上运行就是并行， 同一时刻多个任务在执行</li>
</ul>
</li>
<li><p>go协程与go主线程</p>
<ul>
<li>go主线程：一个go线程上，可以起多个协程，协程是轻量级的线程</li>
</ul>
</li>
<li><p>go协程的特点</p>
<ul>
<li>有独立的栈空间</li>
<li>共享程序堆空间</li>
<li>调度由用户控制</li>
<li>协程是轻量级的线程</li>
</ul>
</li>
<li><p>快速入门</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;hello world &quot;</span>, i)</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">go</span> test()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;main() hello world &quot;</span>, i)</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>小结<ul>
<li>主线程是一个物理线程，直接作用在cpu上，是重量级的，非常消耗cpu资源</li>
<li>协程是从主线程开启的，是轻量级的，是逻辑态，对资源消耗非常小</li>
<li>go的协程机制是重要的特点，可以轻松的开启上万个协程。其它编程语言的并发机制一般是基于线程的，开启过多的线程，资源消耗非常大。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>goroutine的调度模型</p>
<ul>
<li><p>MPG模式</p>
<ul>
<li>M:操作系统的主线程</li>
<li>P：协程执行所需的上下文</li>
<li>G：协程</li>
</ul>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://juejin.cn/post/6978024767341199396"> MPG 模型概述 </a> </p>
</li>
</ul>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 查看cpu数</span></span><br><span class="line">	cupNum := runtime.NumCPU()</span><br><span class="line">	fmt.Println(cupNum)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置使用多个cpu ,go1.8之前需要设置，之后不需要设置</span></span><br><span class="line">	runtime.GOMAXPROCS(cupNum - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="56，管道"><a href="#56，管道" class="headerlink" title="56，管道"></a>56，管道</h5><ul>
<li><p>程序同步</p>
<ul>
<li><p>加锁</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	myMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line">	lock sync.Mutex</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(n <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	res := <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">		res *= i </span><br><span class="line">	&#125;</span><br><span class="line">	lock.Lock()</span><br><span class="line">	myMap[n] = res</span><br><span class="line">	lock.Unlock()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> test(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	time.Sleep(time.Second * <span class="number">3</span>)</span><br><span class="line">    lock.Lock()</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> myMap&#123;</span><br><span class="line">		fmt.Println(i, v)</span><br><span class="line">	&#125;</span><br><span class="line">    lock.Unlock()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>管道</p>
<ul>
<li>为什么需要管道<ul>
<li>全局变量加锁同步解决goroutine的通讯，不完美</li>
<li>主线程在等待所有goroutine完成的时间很难确定</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>channel介绍</p>
<ul>
<li><p>channel的本质就是一个数据结构， 队列</p>
</li>
<li><p>线程安全，多goroutine访问时，不需要加锁，channel本身就是线程安全的</p>
</li>
<li><p>channel是有类型的，一个string类型的channel只能存放string类型的数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 创建管道</span></span><br><span class="line">	<span class="keyword">var</span> intChan <span class="keyword">chan</span> <span class="keyword">int</span> </span><br><span class="line">	intChan = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;值：%v, 地址：%p\n&quot;</span>, intChan, &amp;intChan)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向管道写数据</span></span><br><span class="line">	intChan &lt;- <span class="number">10</span></span><br><span class="line">	num := <span class="number">20</span></span><br><span class="line">	intChan &lt;- num</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 从管道取数据</span></span><br><span class="line">	<span class="comment">// 在没有使用协程的情况下，如果我们的管道数据已经全部取出，会报dead lock错误</span></span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">int</span> </span><br><span class="line">	num2 = &lt;- intChan</span><br><span class="line">	fmt.Printf(<span class="string">&quot;num2=%v\n&quot;</span>, num2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看管道的长度和cap</span></span><br><span class="line">	<span class="comment">// 当我们给管道写入数据时，不能超过容量</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len=%v, cap=%v\n&quot;</span>, <span class="built_in">len</span>(intChan), <span class="built_in">cap</span>(intChan))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用注意事项</p>
<ul>
<li>只能存放指定的数据类型</li>
<li>放满后就不能再放入了</li>
<li>从channel取出数据后，就可以继续放入</li>
<li>在没有使用协程的情况下，如果channel的数据取完了，就会报dead lock</li>
</ul>
</li>
<li><p>例子</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义一个存放任意数据类型的管道</span></span><br><span class="line">	<span class="keyword">var</span> allChan <span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	allChan = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	allChan &lt;- <span class="number">10</span></span><br><span class="line">	allChan &lt;- <span class="string">&quot;tom&quot;</span></span><br><span class="line">	allChan &lt;- Cat&#123;<span class="string">&quot;小花猫&quot;</span>, <span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">	&lt;-allChan</span><br><span class="line">	&lt;-allChan</span><br><span class="line"></span><br><span class="line">	newCat := &lt;-allChan</span><br><span class="line">	fmt.Printf(<span class="string">&quot;newCat type=%T, newCat=%v\n&quot;</span>, newCat, newCat)</span><br><span class="line">	<span class="comment">// fmt.Println(newCat.Name)  该写法会编译不通过，需要类型断言</span></span><br><span class="line">	a := newCat.(Cat)</span><br><span class="line">	fmt.Println(a.Name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>channel的遍历和关闭</p>
<ul>
<li><p>关闭</p>
<ul>
<li><p>使用内置函数close可以关闭channel，关闭channel之后不能写入数据，但是还可以读数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	intChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line">	intChan &lt;- <span class="number">1</span></span><br><span class="line">	intChan &lt;- <span class="number">2</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">close</span>(intChan)</span><br><span class="line">	<span class="comment">// intChan &lt;- 3</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">	a = &lt;-intChan</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>遍历</p>
<ul>
<li><p>for…range的方式遍历管道时有两个细节：</p>
<ul>
<li>在遍历时，如果管道没有关闭，会出现deadlock的错误</li>
<li>在遍历时，如果已经关闭，则会正常遍历数据，遍历完后，会退出遍历</li>
</ul>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	intChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line">	intChan &lt;- <span class="number">1</span></span><br><span class="line">	intChan &lt;- <span class="number">2</span></span><br><span class="line">	intChan &lt;- <span class="number">3</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">close</span>(intChan)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> val := <span class="keyword">range</span> intChan &#123;</span><br><span class="line">		fmt.Println(val)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>协程和管道的结合</p>
<ul>
<li><p>应用实例1</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeData</span><span class="params">(intChan <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">50</span>; i++ &#123;</span><br><span class="line">		intChan &lt;- i</span><br><span class="line">		fmt.Printf(<span class="string">&quot;writeData  %v\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>((intChan))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readData</span><span class="params">(intChan <span class="keyword">chan</span> <span class="keyword">int</span>, exitChan <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		v, ok := &lt;- intChan</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;readData 读到数据=%v\n&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">	exitChan &lt;- <span class="literal">true</span> </span><br><span class="line">	<span class="built_in">close</span>(exitChan)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	intChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span> , <span class="number">50</span>)</span><br><span class="line">	exitChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> writeData(intChan)</span><br><span class="line">	<span class="keyword">go</span> readData(intChan, exitChan)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		_, ok := &lt;- exitChan</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>应用实例二</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果只是向管道写入数据，没有读取数据，就会出现阻塞而deadlock。如果管道的写和读的频率不一致，无所谓</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>应用实例三</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求素数</span></span><br><span class="line"><span class="keyword">package</span> main </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">putNum</span><span class="params">(intChan <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">8000</span>; i++ &#123;</span><br><span class="line">		<span class="comment">// fmt.Println(&quot;putNum i=&quot;, i)</span></span><br><span class="line">		intChan &lt;- i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(intChan)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">primeNum</span><span class="params">(intChan <span class="keyword">chan</span> <span class="keyword">int</span>, primeChan <span class="keyword">chan</span> <span class="keyword">int</span>, exitChan <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> flag <span class="keyword">bool</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		num, ok := &lt;- intChan</span><br><span class="line">		<span class="comment">// fmt.Println(&quot;primeNum  num= &quot;, num)</span></span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		flag = <span class="literal">true</span></span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">2</span>; i &lt; num; i++ &#123;</span><br><span class="line">			<span class="keyword">if</span> num % i == <span class="number">0</span>&#123;</span><br><span class="line">				flag = <span class="literal">false</span></span><br><span class="line">				<span class="keyword">break</span> </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> flag &#123;</span><br><span class="line">			primeChan &lt;- num</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	exitChan &lt;- <span class="literal">true</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	intChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1000</span>)</span><br><span class="line">	primeChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">2000</span>)</span><br><span class="line">	exitChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> putNum(intChan)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> primeNum(intChan, primeChan, exitChan)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(exitChan) == <span class="number">4</span>&#123;</span><br><span class="line">				<span class="built_in">close</span>(exitChan)</span><br><span class="line">				<span class="built_in">close</span>(primeChan)</span><br><span class="line">				<span class="keyword">return</span> </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		res, ok := &lt;- primeChan</span><br><span class="line">		<span class="keyword">if</span> !ok&#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;素数=%v\n&quot;</span>, res)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;main退出&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>练习</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启动一个协程，将1-2000的数放入到一个channel中，比如numChan</span></span><br><span class="line"><span class="comment">// 启动8个协程,从numChan取出数，并计算1+...+n的值，并存放到resChan</span></span><br><span class="line"><span class="comment">// 最后8个协程协同完成工作后，再遍历resChan, 显示结果如下 res[1] = 1, res[10] = 55</span></span><br><span class="line"><span class="comment">// 注意考虑resChan chan int 是否合适</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeData</span><span class="params">(srcCh <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">2</span>;i&lt;=<span class="number">2000</span>;i++&#123;</span><br><span class="line">		srcCh &lt;- i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(srcCh)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal</span><span class="params">(srcCh <span class="keyword">chan</span> <span class="keyword">int</span>, resCh <span class="keyword">chan</span> Res, exitCh <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		val, ok := &lt;- srcCh</span><br><span class="line">		<span class="keyword">if</span> ! ok &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		sum := <span class="number">1</span></span><br><span class="line">		<span class="keyword">for</span> i:=<span class="number">2</span>;i&lt;=val;i++&#123;</span><br><span class="line">			sum += i</span><br><span class="line">		&#125;</span><br><span class="line">		resCh &lt;- Res&#123;val, sum&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	exitCh &lt;- <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Res <span class="keyword">struct</span>&#123;</span><br><span class="line">	Num <span class="keyword">int</span> </span><br><span class="line">	Sum <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> srcCh = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">50</span>)</span><br><span class="line">	<span class="keyword">var</span> resCh = <span class="built_in">make</span>(<span class="keyword">chan</span> Res, <span class="number">2000</span>)</span><br><span class="line">	<span class="keyword">var</span> exitCh = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> writeData(srcCh)</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++&#123;</span><br><span class="line">		<span class="keyword">go</span> cal(srcCh, resCh, exitCh)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>&#123;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(exitCh) == <span class="number">8</span>&#123;</span><br><span class="line">				<span class="built_in">close</span>(resCh)</span><br><span class="line">				<span class="built_in">close</span>(exitCh)</span><br><span class="line">				<span class="keyword">break</span> </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		res, ok := &lt;- resCh</span><br><span class="line">		<span class="keyword">if</span> !ok&#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;res[%d]=%d\n&quot;</span>, res.Num, res.Sum)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// goroutine + channel配合完成排序，并写入文件</span></span><br><span class="line"><span class="comment">// 开一个协程writeDataToFile，随机生成100个数据，存放到文件中</span></span><br><span class="line"><span class="comment">// 当writeDataToFile完成写1000个数据到文件后，让sort协程从文件中读取1000个数据，完成排序，重新写入到另外一个文件</span></span><br><span class="line"><span class="comment">// 功能扩展：开10个协程writeDataToFile，每个协程随机生成1000个数据存放到10个文件中</span></span><br><span class="line"><span class="comment">// 当10个文件都生成了，让10个sort协程从10个文件中读取1000个文件，完成排序，重新写入到10个结果文件</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>channel使用细节和注意事项</p>
<ul>
<li><p>channel可以声明为只读，或者只写性质</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="comment">// 可读可写</span></span><br><span class="line">	<span class="keyword">var</span> chan1 <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 只读</span></span><br><span class="line">	<span class="keyword">var</span> chan2 &lt;-<span class="keyword">chan</span> <span class="keyword">int</span> </span><br><span class="line"></span><br><span class="line">	<span class="comment">// 只写</span></span><br><span class="line">	<span class="keyword">var</span> chan3 <span class="keyword">chan</span>&lt;- <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用select可以解决从管道取数据的阻塞问题</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	intChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span> , <span class="number">10</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">		intChan &lt;- i</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	stringChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">5</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		stringChan &lt;- fmt.Sprintf(<span class="string">&quot;test%d&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传统的方法遍历管道时，我们不关闭会阻塞而导致deadlock</span></span><br><span class="line">	<span class="comment">// 可以使用select方式解决</span></span><br><span class="line">	label1:</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> v := &lt;-intChan:</span><br><span class="line">				fmt.Printf(<span class="string">&quot;intChan取出的数据为%d\n&quot;</span>, v)</span><br><span class="line">			<span class="keyword">case</span> v := &lt;-stringChan:</span><br><span class="line">				fmt.Printf(<span class="string">&quot;stringChan取出的数据为%v\n&quot;</span>, v)</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				fmt.Println(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">				<span class="keyword">break</span> label1</span><br><span class="line">				<span class="comment">// return </span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>goroutine中使用recover,解决协程中出现panic，导致程序崩溃的问题 </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">		fmt.Println(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span>&#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;test2 发生错误。&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">var</span> myMap <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span></span><br><span class="line">	myMap[<span class="number">0</span>] = <span class="string">&quot;test2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">go</span> test1()</span><br><span class="line">	<span class="keyword">go</span> test2()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;main&quot;</span>)</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="57，反射"><a href="#57，反射" class="headerlink" title="57，反射"></a>57，反射</h5><ul>
<li><p> 使用场景</p>
</li>
<li><p>序列化指定tag</p>
</li>
<li><p>函数适配器</p>
</li>
<li><p>基本介绍</p>
<ul>
<li>反射可以在运行时动态或者去变量的各种信息，比如变量的类型，类别</li>
<li>如果是结构体变量，还可以获取到结构体本身的信息（包括结构体的字段，方法）</li>
<li>通过反射，可以修改变量的值，可以调用关联的方法</li>
<li>使用反射，需要import (“reflect”)</li>
</ul>
</li>
<li><p>反射的重要函数和概念</p>
<ul>
<li>reflect.TypeOf(), 获取类型，返回reflect.Type类型</li>
<li>reflect.ValueOf()， 获取变量的值，返回reflect.Value类型，reflect.Value是一个结构体</li>
<li>变量，interface{}和reflect.Value直接可以相互转换</li>
</ul>
</li>
<li><p>快速入门</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectTest</span><span class="params">(b <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	<span class="comment">// 通过反射获取传入的变量的type，kind，值</span></span><br><span class="line">	<span class="comment">// 先获取 reflect.Type</span></span><br><span class="line">	rTyp := reflect.TypeOf(b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;rTyp = %v\n&quot;</span>, rTyp)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获取reflect.Value</span></span><br><span class="line">	rVal := reflect.ValueOf(b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;rVal = %v, rVal type = %T\n&quot;</span>, rVal, rVal)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 下面我们将rVal转成 interface&#123;&#125;</span></span><br><span class="line">	iV := rVal.Interface()</span><br><span class="line"></span><br><span class="line">	num2 := iV.(<span class="keyword">int</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;num2 = &quot;</span>, num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">var</span> num <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line">	reflectTest(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectTest</span><span class="params">(b <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	rTyp := reflect.TypeOf(b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;rTyp name = %v, rTyp.kind = %v&quot;</span>, rTyp, rTyp)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;rTyp = %v, rTyp type %T\n&quot;</span>, rTyp, rTyp)</span><br><span class="line"></span><br><span class="line">	rVal := reflect.ValueOf(b)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;rVal = %v, rVal type = %T\n&quot;</span>, rVal, rVal)</span><br><span class="line"></span><br><span class="line">	iV := rVal.Interface()</span><br><span class="line">	</span><br><span class="line">	stu := iV.(Student)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;stu = %v\n&quot;</span>, stu)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	stu := Student&#123;<span class="string">&quot;tom&quot;</span>, <span class="number">20</span>&#125;</span><br><span class="line">	reflectTest(stu)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>反射注意事项和细节说明</p>
<ul>
<li><p>reflect.Value.Kind ， 获取变量的类别，返回的是一个常量</p>
</li>
<li><p>Type是类型，Kind是类别，Type和Kind可能是相同的，也可能是不同的</p>
</li>
<li><p>通过反射可以让变量在interface{}和reflect.Value之间相互转换</p>
</li>
<li><p>使用反射的方式来获取变量的值，要求数据类型匹配，比如x是int，那么应该使用reflect.Value().Int()</p>
</li>
<li><p>通过反射来修改变量，注意使用SetXX方法来设置，需要通过对应的指针类型来完成，同时需要reflect.Value.Elem()方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过反射修改</span></span><br><span class="line"><span class="comment">// num int的值</span></span><br><span class="line"><span class="comment">// 修改 student结构体的值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectTest1</span><span class="params">(b <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	rVal := reflect.ValueOf(b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;rVal kind=%v\n&quot;</span>, rVal.Kind())</span><br><span class="line">	<span class="comment">// rVal.Elem() 等价于 *rVal</span></span><br><span class="line">	rVal.Elem().SetInt(<span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line">	reflectTest1(&amp;num)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;num=%v&quot;</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>最佳实践</p>
<ul>
<li><p>使用反射遍历结构体的字段，调用结构体的方法，并获取结构体标签的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Monster <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="keyword">int</span> <span class="string">`json:&quot;monster_age&quot;`</span></span><br><span class="line">	Score <span class="keyword">float32</span></span><br><span class="line">	Sex <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Monster)</span> <span class="title">Print</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;---start---&quot;</span>)</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	fmt.Println(<span class="string">&quot;---end---&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Monster)</span> <span class="title">GetSum</span><span class="params">(n1, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Monster)</span> <span class="title">Set</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int</span>, score <span class="keyword">float32</span>, sex <span class="keyword">string</span>)</span></span>&#123;</span><br><span class="line">	s.Name = name</span><br><span class="line">	s.Age = age </span><br><span class="line">	s.Score = score</span><br><span class="line">	s.Sex = sex </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStruct</span><span class="params">(a <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	typ := reflect.TypeOf(a)</span><br><span class="line">	val := reflect.ValueOf(a)</span><br><span class="line"></span><br><span class="line">	kd := val.Kind()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> kd != reflect.Struct&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;expect struct&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	num := val.NumField()</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;struct has %d fields\n&quot;</span>, num)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; num; i++&#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;field %d 值为：%v\n&quot;</span>, i, val.Field(i))</span><br><span class="line">		tagVal := typ.Field(i).Tag.Get(<span class="string">&quot;json&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> tagVal != <span class="string">&quot;&quot;</span>&#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;Field%d的tag为%v\n&quot;</span>, i, tagVal)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	numOfMethod := val.NumMethod()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;struct has %d methods\n&quot;</span>, numOfMethod)</span><br><span class="line"></span><br><span class="line">	val.Method(<span class="number">1</span>).Call(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> params []reflect.Value </span><br><span class="line">	params = <span class="built_in">append</span>(params, reflect.ValueOf(<span class="number">10</span>))</span><br><span class="line">	params = <span class="built_in">append</span>(params, reflect.ValueOf(<span class="number">40</span>))</span><br><span class="line"></span><br><span class="line">	res := val.Method(<span class="number">0</span>).Call(params)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;res = &quot;</span>, res[<span class="number">0</span>].Int())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;	</span><br><span class="line">	<span class="keyword">var</span> a Monster = Monster&#123;</span><br><span class="line">		<span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		<span class="number">20</span>,</span><br><span class="line">		<span class="number">30.8</span>,</span><br><span class="line">		<span class="string">&quot;男&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	TestStruct(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用反射的方式来获取结构体的tag标签，遍历字段的值，修改字段值，调用结构体的方法</p>
</li>
<li><p>定义两个函数test和test2，定义一个适配器函数用作统一处理接口</p>
</li>
</ul>
</li>
</ul>
<h5 id="58，-网络编程"><a href="#58，-网络编程" class="headerlink" title="58， 网络编程"></a>58， 网络编程</h5><ul>
<li><p>分类</p>
<ul>
<li>TCP  socket编程</li>
<li>b/s结构的http编程</li>
</ul>
</li>
<li><p>例子</p>
<ul>
<li><p>server.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">process</span><span class="params">(conn net.Conn)</span></span>&#123;</span><br><span class="line">	<span class="keyword">defer</span> conn.Close()</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</span><br><span class="line">		<span class="comment">// 等待客户端通过conn发送消息</span></span><br><span class="line">		<span class="comment">// 如果客户端没有write，那么协程会阻塞在这里</span></span><br><span class="line">		<span class="comment">// fmt.Println(&quot;服务器等待输入\n&quot;)</span></span><br><span class="line">		n, err := conn.Read(buf)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;服务端 read err: &quot;</span>, err)</span><br><span class="line">			<span class="keyword">return</span> </span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 显示客户端发送的内容</span></span><br><span class="line">		fmt.Print(<span class="keyword">string</span>(buf[:n]))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	sock, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:8888&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// fmt.Println(&quot;listen=&quot;, listen)</span></span><br><span class="line">	<span class="keyword">defer</span> sock.Close()</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		conn, err := sock.Accept()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;conn=&quot;</span>, conn)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">go</span> process(conn)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>client.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	conn, err := net.Dial(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;127.0.0.1:8888&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span> </span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;client conn=&quot;</span>, conn)</span><br><span class="line">	reader := bufio.NewReader(os.Stdin)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		</span><br><span class="line">		line, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;readString err:&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> strings.Trim(line, <span class="string">&quot;\r\n&quot;</span>) == <span class="string">&quot;exit&quot;</span> &#123;</span><br><span class="line">			<span class="keyword">break</span> </span><br><span class="line">		&#125;</span><br><span class="line">		n, err := conn.Write([]<span class="keyword">byte</span>(line))</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;Write err:&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;客户端发送了%d个字节数据&quot;</span>, n)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>新增功能</p>
<ul>
<li>客户端和服务端对话</li>
<li>客户端之间对话</li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/go/" rel="tag"># go</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2023/05/11/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/" rel="prev" title="链表">
      <i class="fa fa-chevron-left"></i> 链表
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2023/05/15/go/%E5%AE%B6%E5%BA%AD%E6%94%B6%E6%94%AF%E8%AE%B0%E8%B4%A6%E9%A1%B9%E7%9B%AE/" rel="next" title="家庭收支记账项目">
      家庭收支记账项目 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%BC%80%E5%8F%91%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.</span> <span class="nav-text">1,开发的步骤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-Golang%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="nav-number">2.</span> <span class="nav-text">2,Golang执行流程分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C%E8%AF%B4%E6%98%8E"><span class="nav-number">3.</span> <span class="nav-text">3，编译和运行说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8Cgo%E5%BC%80%E5%8F%91%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">4.</span> <span class="nav-text">4，go开发的注意事项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-go%E8%AF%AD%E8%A8%80%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="nav-number">5.</span> <span class="nav-text">5, go语言转义字符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-%E6%B3%A8%E9%87%8A"><span class="nav-number">6.</span> <span class="nav-text">6,注释</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7%EF%BC%8C%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC"><span class="nav-number">7.</span> <span class="nav-text">7，代码风格</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-golang%E5%AE%98%E6%96%B9%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97"><span class="nav-number">8.</span> <span class="nav-text">8,golang官方编程指南</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-Golang%E6%A0%87%E5%87%86%E5%BA%93API%E6%96%87%E6%A1%A3"><span class="nav-number">9.</span> <span class="nav-text">9,Golang标准库API文档</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-vs-code%E8%A7%A3%E5%86%B3%E4%BB%A3%E7%A0%81%E8%B7%B3%E8%BD%AC%E9%97%AE%E9%A2%98"><span class="nav-number">10.</span> <span class="nav-text">10, vs code解决代码跳转问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-%E5%8F%98%E9%87%8F"><span class="nav-number">11.</span> <span class="nav-text">11,变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#12-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">12.</span> <span class="nav-text">12, 数据类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#14-%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.</span> <span class="nav-text">14,浮点类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#15%EF%BC%8C%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="nav-number">14.</span> <span class="nav-text">15，字符类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#16-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="nav-number">15.</span> <span class="nav-text">16,布尔类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#17%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">16.</span> <span class="nav-text">17，字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#18%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-number">17.</span> <span class="nav-text">18，基本数据类型的默认值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#19-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">18.</span> <span class="nav-text">19,基本数据类型的转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#20-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8Cstring%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">19.</span> <span class="nav-text">20,基本数据类型和string的转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#21%EF%BC%8C%E6%8C%87%E9%92%88"><span class="nav-number">20.</span> <span class="nav-text">21，指针</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#22%EF%BC%8C%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">21.</span> <span class="nav-text">22，标识符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#23%EF%BC%8C%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">22.</span> <span class="nav-text">23，运算符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#24-%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">23.</span> <span class="nav-text">24,键盘输入数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#25-%E4%BA%8C%E8%BF%9B%E5%88%B6"><span class="nav-number">24.</span> <span class="nav-text">25,二进制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#26%EF%BC%8C%E5%8E%9F%E7%A0%81%EF%BC%8C%E5%8F%8D%E7%A0%81%EF%BC%8C%E8%A1%A5%E7%A0%81-%EF%BC%88%E5%AF%B9%E4%BA%8E%E6%9C%89%E7%AC%A6%E5%8F%B7%E6%95%B0%EF%BC%89"><span class="nav-number">25.</span> <span class="nav-text">26，原码，反码，补码 （对于有符号数）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#27%EF%BC%8C%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">26.</span> <span class="nav-text">27，位运算符和移位运算符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#28%EF%BC%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">27.</span> <span class="nav-text">28，流程控制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#29%EF%BC%8C%E8%B7%B3%E8%BD%AC%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5-break"><span class="nav-number">28.</span> <span class="nav-text">29，跳转控制语句 break</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#30%EF%BC%8Ccontinue%E8%B7%B3%E5%87%BA%E5%BD%93%E5%89%8D%E5%BE%AA%E7%8E%AF"><span class="nav-number">29.</span> <span class="nav-text">30，continue跳出当前循环</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#31%EF%BC%8Cgoto%E5%92%8Creturn"><span class="nav-number">30.</span> <span class="nav-text">31，goto和return</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#32%EF%BC%8C%E5%87%BD%E6%95%B0"><span class="nav-number">31.</span> <span class="nav-text">32，函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#33%EF%BC%8Cinit%E5%87%BD%E6%95%B0"><span class="nav-number">32.</span> <span class="nav-text">33，init函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#34%EF%BC%8C%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="nav-number">33.</span> <span class="nav-text">34，匿名函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#35%EF%BC%8C%E9%97%AD%E5%8C%85"><span class="nav-number">34.</span> <span class="nav-text">35，闭包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#36-%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84defer"><span class="nav-number">35.</span> <span class="nav-text">36, 函数中的defer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#37%EF%BC%8C%E5%87%BD%E6%95%B0%E7%9A%84%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F"><span class="nav-number">36.</span> <span class="nav-text">37，函数的传参方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#38%EF%BC%8C%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">37.</span> <span class="nav-text">38，变量作用域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#39%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">38.</span> <span class="nav-text">39，字符串中常用的函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#40-%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%85%B3%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">39.</span> <span class="nav-text">40,时间和日期相关的函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#41%EF%BC%8C%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="nav-number">40.</span> <span class="nav-text">41，内置函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#42%EF%BC%8C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="nav-number">41.</span> <span class="nav-text">42，错误处理机制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#43%EF%BC%8C%E6%95%B0%E7%BB%84"><span class="nav-number">42.</span> <span class="nav-text">43，数组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#44%EF%BC%8C%E5%88%87%E7%89%87"><span class="nav-number">43.</span> <span class="nav-text">44，切片</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#45%EF%BC%8C%E6%8E%92%E5%BA%8F%E5%92%8C%E6%9F%A5%E6%89%BE"><span class="nav-number">44.</span> <span class="nav-text">45，排序和查找</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#46%EF%BC%8C%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="nav-number">45.</span> <span class="nav-text">46，二维数组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#47%EF%BC%8Cmap"><span class="nav-number">46.</span> <span class="nav-text">47，map</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#48-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"><span class="nav-number">47.</span> <span class="nav-text">48, 面向对象编程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#49%EF%BC%8C%E6%8E%A5%E5%8F%A3"><span class="nav-number">48.</span> <span class="nav-text">49，接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#50-%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="nav-number">49.</span> <span class="nav-text">50,类型断言</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#51%EF%BC%8C%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">50.</span> <span class="nav-text">51，文件操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#52-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="nav-number">51.</span> <span class="nav-text">52, 命令行参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#53%EF%BC%8C%E5%BA%8F%E5%88%97%E5%8C%96"><span class="nav-number">52.</span> <span class="nav-text">53，序列化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#54%EF%BC%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">53.</span> <span class="nav-text">54，单元测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#55%EF%BC%8Cgoroutine-%E5%8D%8F%E7%A8%8B"><span class="nav-number">54.</span> <span class="nav-text">55，goroutine(协程)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#56%EF%BC%8C%E7%AE%A1%E9%81%93"><span class="nav-number">55.</span> <span class="nav-text">56，管道</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#57%EF%BC%8C%E5%8F%8D%E5%B0%84"><span class="nav-number">56.</span> <span class="nav-text">57，反射</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#58%EF%BC%8C-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="nav-number">57.</span> <span class="nav-text">58， 网络编程</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ruoxi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">67</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ruoxi</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
